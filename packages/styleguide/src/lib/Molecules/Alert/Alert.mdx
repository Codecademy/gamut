import { Canvas, Controls, Meta } from '@storybook/blocks';

import { ComponentHeader, ImageWrapper } from '~styleguide/blocks';

import * as AlertStories from './Alert.stories';

export const parameters = {
  title: 'Alert',
  subtitle: `An alert displays an important, succinct message, and provides actions for users to address (or dismiss the alert). It requires a user action to be dismissed.`,
  design: {
    type: 'figma',
    url: 'https://www.figma.com/file/ReGfRNillGABAj5SlITalN/%F0%9F%93%90-Gamut?node-id=30186-40358',
  },
  status: 'current',
  source: {
    repo: 'gamut',
    githubLink:
      'https://github.com/Codecademy/gamut/blob/main/packages/gamut/src/Alert/Alert.tsx',
  },
};

<Meta of={AlertStories} />

<ComponentHeader {...parameters} />

## Usage

Use an alert to display an important, succinct message with actions for users to address (or dismiss) the alert. It requires a user action to be dismissed.

### Best practices:

- Choose the alert type that applies most to your case.
- Only use Feature alert for product/feature announcements that are specific to that page.
- Alerts should be persistent and non-modal, allowing the user to either ignore them or interact with them at any time.

### When NOT to use:

- Low priority– for lower priority, decorative, or celebratory user feedback, use the **Toast** component instead.
- Non-critical– for informational or promotional content that isn't urgent or doesn't require immediate user action, use the **Banner** component instead.
- Passive updates– for non-urgent, passive updates that users can check at their convenience, use the **NotificationList** component instead.
- Form field validation– for inline form errors or validation messages, use inline messaging within the form fields instead of an alert.

## Anatomy

<ImageWrapper src="./molecules/alertAnatomy.png" alt="Alert Anatomy diagram" />

1. Icon

- Automatically displays for the selected alert type: general, success, error, or subtle
- Decorative, so no alt-text is needed

2. Text

- Explain what happened and, when applicable, what the user can do
- Write in a conversational style and plain language
- Front-load the most important information

3. CTA button (optional)

- Use to prompt users to take action related to the alert message

4. Dismiss button (optional)

- Use to allow users to remove the alert after they've acknowledged it or when it's no longer needed
- Only exclude when the information must remain visible until specific conditions are met to ensure users don’t miss critical information

## Variants

### Alert types

#### General

<Canvas of={AlertStories.General} />

#### Success

<Canvas of={AlertStories.Success} />

#### Feature

<Canvas of={AlertStories.Feature} />

#### Notice

<Canvas of={AlertStories.Notice} />

#### Error

<Canvas of={AlertStories.Error} />

#### Subtle

<Canvas of={AlertStories.Subtle} />

### Inline

For inline use you can use these non-stroked versions for the General, Success and Error type. Use the ColorMode toggle to checkout both ColorModes for our `subtle` variant!

#### General

<Canvas of={AlertStories.GeneralInline} />

#### Success

<Canvas of={AlertStories.SuccessInline} />

#### Feature

<Canvas of={AlertStories.FeatureInline} />

#### Notice

<Canvas of={AlertStories.NoticeInline} />

#### Error

<Canvas of={AlertStories.ErrorInline} />

#### Subtle

<Canvas of={AlertStories.SubtleInline} />

### Small widths

When the width of the alert is less than 480px, the button automatically stacks below the text.

<Canvas of={AlertStories.SmallWidth} />

## Close button props

If an `Alert` has an `onClose` prop, it will render a close button on the top right corner of the alert.

<Canvas of={AlertStories.WithCloseButton} />

### Interactive dismissal

This example demonstrates how to handle alert dismissal using the `onClose` callback:

<Canvas of={AlertStories.Dismissible} />

### Close button customization

The Alert's close button can be customized through the `closeButtonProps` object:

- `disabled?: boolean` - Whether to disable the default close button
- `ref?: React.Ref<HTMLButtonElement>` - An optional ref to be passed to the close button for programmatic access
- `tip?: string` - The close button tooltip text (defaults to "Close alert")
- `tipAlignment?: 'top-left' | 'top-center' | 'top-right' | 'bottom-left' | 'bottom-center' | 'bottom-right'` - The alignment of the tooltip (defaults to "bottom-center")

<Canvas of={AlertStories.CloseButtonCustomization} />

## Playground

<Canvas sourceState="shown" of={AlertStories.Default} />

<Controls />
