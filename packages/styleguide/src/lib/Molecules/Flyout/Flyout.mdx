import { Canvas, Controls, Meta } from '@storybook/blocks';

import { ComponentHeader, LinkTo } from '~styleguide/blocks';

import * as FlyoutStories from './Flyout.stories';

export const parameters = {
  title: 'Flyout',
  subtitle: `Flyout is a general purpose container that animates into view.`,
  design: {
    type: 'figma',
    url: 'https://www.figma.com/file/ReGfRNillGABAj5SlITalN/%F0%9F%93%90-Gamut?node-id=30420-40034',
  },
  status: 'current',
  source: {
    repo: 'gamut',
    githubLink:
      'https://github.com/Codecademy/gamut/blob/main/packages/gamut/src/Flyout/index.tsx',
  },
};

<Meta of={FlyoutStories} />

<ComponentHeader {...parameters} />

## Usage

On button click, a container animates in from the left or right side of the window. Flyout can be configured to close by pressing the “X” close icon, pressing they “esc” key, and/or clicking outside of the container.

Internally, Flyout is a combination of <LinkTo id="Molecules/Modals/Overlay">Overlay</LinkTo> and <LinkTo id="Atoms/Drawer">Drawer</LinkTo>.

Our Flyouts are [controlled components](https://reactjs.org/docs/forms.html#controlled-components), so their checked value must be controlled by an external state passed in as `expanded` and `onChange`.

The component that toggles the `Flyout` should include the `aria-expanded` attribute. The `aria-expanded` attribute should reflect the value of the `expanded` prop passed to the `Flyout`. In the example below, the `StrokeButton` controls the expansion of the `Flyout`, so the button has the `aria-expanded` attribute.

```tsx
const ExampleFlyout: React.FC = () => {
  const [expanded, setExpanded] = useState(false);

  return (
    <FlexBox>
      <Flyout expanded={expanded} id={flyoutId}>
        Example Flyout
      </Flyout>
      <StrokeButton
        aria-expanded={expanded}
        onClick={() => setExpanded((previousExpanded) => !previousExpanded)}
      >
        Set the proper aria-labels!
      </StrokeButton>
    </FlexBox>
  );
};
```

## Playground

<Canvas sourceState="shown" of={FlyoutStories.Default} />

<Controls />
