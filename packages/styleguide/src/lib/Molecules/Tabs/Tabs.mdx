import { Canvas, Controls, Meta } from '@storybook/blocks';

import { ComponentHeader, KeyboardKey, LinkTo } from '~styleguide/blocks';

import * as TabStories from './Tabs.stories';

export const parameters = {
  title: 'Tabs',
  subtitle:
    'Tabs organize content into multiple sections, with only one section visible at a time.',
  design: {
    type: 'figma',
    url: 'https://www.figma.com/file/ReGfRNillGABAj5SlITalN/%F0%9F%93%90-Gamut?node-id=31226-41459',
  },
  status: 'current',
  source: {
    repo: 'gamut',
    githubLink:
      'https://github.com/Codecademy/gamut/blob/main/packages/gamut/src/Tabs/Tabs.tsx',
  },
};

<Meta of={TabStories} />

<ComponentHeader {...parameters} />

## Usage

Use tabs when you have multiple potential sections to show, but only one should be visible at a time.
The set of tabs should be sections of related content that share the same structure and are of equal importance.

## Variants

### Uncontrolled

By default, the `Tabs` component is uncontrolled, meaning it will maintain its own state and switch between the different `TabPanel` components without passing any data to the component. This is good for basic use-cases where you don't need to do anything "extra" when switching tabs.

The `Tabs` component will automatically select the first tab if no `defaultSelectedKey` is provided. You can use `onSelectionChange` in uncontrolled tabs for things like click tracking, but if doing so make sure you pass in a `defaultSelectedKey` otherwise the click tracking will run twice.

<Canvas of={TabStories.Default} />

### Controlled

`Tabs` can be controlled using the `selectedKey` prop, paired with the `onSelectionChange` prop. The `id` prop from the selected tab will be passed into the callback when the tab is selected, allowing you to update state accordingly.

<Canvas of={TabStories.Controlled} />

### Adding a Badge

`Tabs` can use the <LinkTo id="Atoms/Badge">Badge</LinkTo> component to display a status, e.g. indicate new or updated content.

<Canvas of={TabStories.WithBadge} />

### Block variant

If you set `variant='block'`, you will get a slim, dark mode version of `Tabs`.

<Canvas of={TabStories.BlockVariant} />

### Tab navigation

You can also use tabs as standard link-based navigation. To do this, you can use the `TabNav` and `TabNavLink` components.

It is recommended to add a unique `aria-label` to the `TabNav` component, to differentiate it from other navigation elements on the page.

<Canvas of={TabStories.TabsNav} />

### Tabs with interactive content

Normally, when you navigate to the contents of a `TabPanel` using the <KeyboardKey>Tab</KeyboardKey> key or arrow keys, the entire section of the `TabPanel` will be in focus.

However, if you have tabs with interactive content within them (such as a button or link), and tab into the `TabPanel`, the focus will be on the interactive content and not the entirety of the `TabPanel`.

<Canvas of={TabStories.InteractiveContent} />

### Disabled

You can disable a tab by passing the `isDisabled` prop to a specific `Tab` component. Or by passing an array of tab keys that should be disabled to the `disabledKeys` prop of the `Tabs` component.

<Canvas of={TabStories.Disabled} />

### Force mount

By default, when a tab is not selected, the `TabPanel` is not mounted in the DOM. This is to improve performance and avoid unnecessary rendering. However, if you need to force mount the `TabPanel` even when it is not selected, you can pass the `shouldForceMount` prop to the `TabPanel` component.

The `shouldForceMount` prop is a wrapper around the `shouldForceMount` prop in [react-aria-components](https://react-spectrum.adobe.com/react-aria/Tabs.html#tabpanel) that also visually hides the inactive tab panel.

<Canvas of={TabStories.ForceMount} />

## Playground

<Canvas sourceState="shown" of={TabStories.Default} />

<Controls />
