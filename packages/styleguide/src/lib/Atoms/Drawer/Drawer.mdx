import { Canvas, Controls, Meta } from '@storybook/blocks';

import { ComponentHeader, LinkTo } from '~styleguide/blocks';

import * as DrawerStories from './Drawer.stories';

export const parameters = {
  subtitle:
    'Animated container that expands horizontally to show its contents.',
  status: 'current',
  design: {
    type: 'figma',
    url: 'https://www.figma.com/design/ReGfRNillGABAj5SlITalN/%F0%9F%93%90-Gamut?node-id=30420-41014&node-type=frame&t=SgphNxlCwEFrcv0X-0',
  },
  source: {
    repo: 'gamut',
    githubLink:
      'https://github.com/Codecademy/gamut/blob/main/packages/gamut/src/Drawer',
  },
};

<Meta of={DrawerStories} />

<ComponentHeader {...parameters} />

## Usage

Drawers animate between having `0` width and having a responsive width:

- Mobile devices (&lt;`sm`): `75vw`
- Tablet and larger (&gt;=`sm`): `30rem`

An example of a molecule that uses Drawer is the <LinkTo id="Molecules/Flyout">Flyout</LinkTo>.

Our Drawers are [controlled components](https://reactjs.org/docs/forms.html#controlled-components), so their checked value must be controlled by an external state passed in as `expanded`.

The component that toggles the `Drawer` should include both `aria-expanded` and `aria-controls` attributes. The `aria-controls` attribute must reference the `id` of the `Drawer`. The `aria-expanded` attribute should reflect the value of the `expanded` prop passed to the `Drawer`.

```tsx
const ExampleDrawer: React.FC = () => {
  const [expanded, setExpanded] = useState(false);
  const drawerId = 'example-drawer-id';

  return (
    <FlexBox>
      <Drawer expanded={expanded} id={drawerId}>
        Example Drawer
      </Drawer>
      <StrokeButton
        onClick={() => setExpanded((previousExpanded) => !previousExpanded)}
        aria-expanded={expanded}
        aria-controls={drawerId}
      >
        Set the proper aria-labels!
      </StrokeButton>
    </FlexBox>
  );
};
```

## Playground

<Canvas sourceState="shown" of={DrawerStories.Default} />

<Controls />
