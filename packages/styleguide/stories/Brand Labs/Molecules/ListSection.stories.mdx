import { Card, FillButton, IconButton, Text } from '@codecademy/gamut/src';
import { SearchIcon } from '@codecademy/gamut-icons';
import { ListSection } from '@codecademy/gamut-labs/src';
import title from '@codecademy/macros/lib/title.macro';
import { PropsTable } from '@codecademy/storybook-addon-variance';
import { Canvas, Meta, Story } from '@storybook/addon-docs/blocks';

export const listItems = [
  { title: '1' },
  { title: '2' },
  { title: '3' },
  { title: '4' },
];

<Meta
  title={title}
  component={ListSection}
  parameters={{
    source: 'gamut-labs',
    subtitle: `An abstract List Section that renders a list of items`,
    status: 'updating',
  }}
  args={{
    title: 'List Section Title',
  }}
/>

You will want to use this when the main content of your page is easily divided/organized into multiple sections. You would use one ListSection component to display a list of items in a section.

It has a built in `Show All` functionality.`Show All` button will appear if the number of list items is higher than the initial display amount you wish to show. Once `Show All` button is clicked, it will display all of the list items and the button will change to `Show Less`.

NOTE: Internally, this wraps all children inside `li` elements, so no need to do that yourself. You'll get all the accessibility benefits of the role='listitem' by default out of the box.

<Canvas>
  <Story name="ListSection">
    {(args) => (
      <>
        <ListSection {...args} title="List Section 1">
          {listItems.map((item) => (
            <Card>List Item {item.title}</Card>
          ))}
        </ListSection>
        <ListSection {...args} title="List Section 2" initialDisplayAmount={2}>
          {listItems.map((item) => (
            <Card>List Item {item.title}</Card>
          ))}
        </ListSection>
        <ListSection {...args} title="List Section 3" initialDisplayAmount={2}>
          <Card>List Item 1</Card>
          <Card>List Item 2</Card>
        </ListSection>
      </>
    )}
  </Story>
</Canvas>

<PropsTable story="ListSection" />

## ListSection with Empty State

You can pass in an empty state.

<Canvas>
  <Story name="ListSection with Empty State">
    {(args) => (
      <>
        <ListSection {...args} title="List Section 1">
          <Text>I'm an Empty State.</Text>
        </ListSection>
      </>
    )}
  </Story>
</Canvas>

## ListSection with Header and SecondaryHeader Buttons

It is built on top of [Page Section](https://gamut.codecademy.com/storybook/?path=/docs/molecules-pagesection--page-section) so you may pass in optional header button and header secondary button.

By default, all of the optional buttons are rendered with the `<TextButton>` component.

<Canvas>
  <Story name="ListSection with Header and SecondaryHeader Buttons">
    {(args) => (
      <ListSection
        {...args}
        title="List Section 1"
        headerButton={{ text: 'Edit', href: '', onClick: () => {} }}
        headerSecondaryButton={{ text: 'Share', href: '', onClick: () => {} }}
      >
        {listItems.map((item) => (
          <Card>List Item {item.title}</Card>
        ))}
      </ListSection>
    )}
  </Story>
</Canvas>

## ListSection with Custom Header and SecondaryHeader Buttons

Header and SecondaryHeader buttons are overrideable however by passing a ReactNode as a prop instead.

<Canvas>
  <Story name="ListSection with custom Header and SecondaryHeader Buttons">
    {(args) => (
      <ListSection
        {...args}
        title="List Section 1"
        headerButton={<IconButton icon={SearchIcon} />}
        headerSecondaryButton={<FillButton>Share</FillButton>}
      >
        {listItems.map((item) => (
          <Card>List Item {item.title}</Card>
        ))}
      </ListSection>
    )}
  </Story>
</Canvas>
