import { Meta, Props, Preview, Story } from '@storybook/addon-docs/dist/blocks';
import { StoryStatus } from '../../../Templating/Blocks';
import { useState } from '@storybook/addons';
import { Button, Modal, Text } from '@codecademy/gamut/src';

<Meta title="Core|Molecules/Modal" component={Modal} />

# Modal

Simple Modal portal to escape current DOM Context.

<Preview>
  <Story name="Modal">
    {() => {
      const [isOpen, setIsOpen] = useState(false);
      return (
        <React.Fragment>
          <Button onClick={() => setIsOpen(true)}>Open</Button>
          <Modal isOpen={isOpen} closeModal={() => setIsOpen(false)}>
            Close the modal!
          </Modal>
        </React.Fragment>
      );
    }}
  </Story>
</Preview>

<Props of={Modal} />

### Creating a custom close button

By default, the modal will render a close button.

You can disable the default close button with the `hideDefaultCloseButton` prop.

You can then use the `isOpen` prop to create other controls that toggle the Modal on and off.

<Preview>
  <Story name="Without Close Default">
    {() => {
      const [isOpen, setIsOpen] = useState(false);
      return (
        <React.Fragment>
          <Button onClick={() => setIsOpen(true)}>Open</Button>
          <Modal isOpen={isOpen} hideDefaultCloseButton>
            <p>Close the modal...</p>
            <Button block onClick={() => setIsOpen(false)}>
              with this button instead
            </Button>
          </Modal>
        </React.Fragment>
      );
    }}
  </Story>
</Preview>

### Alternative closing methods

Other than creating buttons that can close the modal, there are other ways a Modal can close depending on what experience you want for the user.

All of these methods rely on setting the `closeModal` prop and making sure it toggles the `isOpen` prop on the modal.

If you enable the `clickOutsideCloses` prop, your Modal will close whenever the user clicks outside of the content of the modal.

By default, clicking the escape key on your keyboard will also close an active Modal.

<Preview>
  <Story name="Clicking Outside">
    {() => {
      const [isOpen, setIsOpen] = useState(false);
      return (
        <React.Fragment>
          <Button onClick={() => setIsOpen(true)}>Open</Button>
          <Modal
            isOpen={isOpen}
            hideDefaultCloseButton
            clickOutsideDeactivates
            closeModal={() => setIsOpen(false)}
          >
            <p>
              Close this modal by clicking the page outside of the Modal
              content, or by clicking the escape key.
            </p>
            <Button block onClick={() => setIsOpen(false)}>
              or with this button
            </Button>
          </Modal>
        </React.Fragment>
      );
    }}
  </Story>
</Preview>
