import { Box, ConnectedFormGroup } from '@codecademy/gamut';
import title from '@codecademy/macros/lib/title.macro';
import { PropsTable } from '@codecademy/storybook-addon-variance';
import { Canvas, Meta, Story } from '@storybook/addon-docs/blocks';
import LinkTo from '@storybook/addon-links/react';

import {
  ConnectedFormPlayground,
  FormGroupStates,
} from './ConnectedForm.examples.tsx';

<Meta
  title={title}
  component={ConnectedFormGroup}
  parameters={{
    subtitle: 'A form group with context',
    source: 'gamut',
    status: 'updating',
  }}
/>

<br />

`ConnectedFormGroup` is a <LinkTo kind='Atoms/FormElements/FormGroup'>FormGroup</LinkTo> that uses the context provided by `ConnectedForm` for error and disabled states. This component ensures that every field has proper error handling and accessibility. It also will type its `field` to the proper `ConnectedFormInput` passed into `component`.

`ConnectedFormGroup` should primarly be used with the `useConnectedForm` hook.

<br />

## States

<Box bg="background" border={1} p={16} mb={48}>
  <FormGroupStates />
</Box>

## Usage

```tsx
<ConnectedFormGroup
  name="badRadioGroup"
  label="cool radio group dude"
  field={{
    component: ConnectedRadioGroupInput,
    //type error, these options are not formatted correctly.
    options: ['one', 'two', 'zero'],
  }}
/>

<ConnectedFormGroup
  name="goodRadioGroup"
  label="cool radio group dude"
  field={{
    component: ConnectedRadioGroupInput,
    // perfection ðŸ™Œ
    options: [
            { label: 'one', value: 'one' },
            { label: 'two', value: 'two' },
            { label: 'zero', value: 'zero' },
          ],
  }}
/>
```

### Code Playground

Edit attributes and see whatâ€™s possible to do with this component or get the exact output you want.

<Canvas>
  <Story name="ConnectedFormGroup">
    {(args) => <ConnectedFormPlayground connectedFormGroup={args} />}
  </Story>
</Canvas>

<PropsTable
  story="ConnectedFormGroup"
  exclude={['fit', 'context', 'no-select']}
/>
