import { Column, LayoutGrid, Markdown, Text } from '@codecademy/gamut/src';
import title from '@codecademy/macros/lib/title.macro';
import { PropsTable } from '@codecademy/storybook-addon-variance';
import { Canvas, Meta, Story } from '@storybook/addon-docs/blocks';

import { elements, tags } from './examples';
import exampleMarkdown from './markdown-example.md';

<Meta
  title={title}
  component={Markdown}
  parameters={{
    subtitle: 'Markdown renderer for all your markdown needs.',
    source: 'gamut',
    status: 'updating',
  }}
  args={{
    text: `
## Hello World
This is markdown
    `,
    spacing: 'tight',
  }}
/>

<Canvas>
  <Story name="Basics">{(args) => <Markdown {...args} />}</Story>
</Canvas>

<PropsTable story="Basics" />

## Full example

<Canvas>
  <Story name="Full example" args={{ text: exampleMarkdown }}>
    {(args) => <Markdown {...args} />}
  </Story>
</Canvas>

## Element overrides

In cases where our default Markdown renderer is not returning exactly what you need, you can override specific tags or custom tags.

<Canvas>
  <Story
    name="Element Overrides"
    args={{
      overrides: elements,
      text: `"## Hello World
          <CodeBlock>Span inside a custom code block element</CodeBlock>
          <CustomElement title='A Custom Component' />"`,
    }}
  >
    {(args) => <Markdown {...args} />}
  </Story>
</Canvas>

A common override may be to change the font size of a Heading.

<Canvas>
  <Story
    name="Tag Overrides"
    args={{ overrides: tags, text: '### Smaller H3' }}
  >
    {(args) => <Markdown {...args} />}
  </Story>
</Canvas>

Img tags are overwitten by the `PausableImage` component because of the accessibility benefits it provides.
When provided with a Gif it will allow it to be paused.

<Canvas>
  <Story
    name="Image Overrides"
    args={{
      text:
        '<img alt="demonstration of learning environment" src="//images.ctfassets.net/go6kr6r0ykrq/2vjTCK9DmJ6BOd5NtFxNIG/e5ced4209aef5241cd581841fa6e2511/learn-css_box-model_06.16.gif" >',
    }}
  >
    <LayoutGrid gap={16}>
      <Column size={6}>
        <Markdown
          spacing="none"
          text={
            '<img src="https://cdn.mos.cms.futurecdn.net/wtqqnkYDYi2ifsWZVW2MT4-1200-80.jpg" alt="beach" data-testid="feature-image">'
          }
        />
      </Column>
      <Column size={6}>
        <Markdown
          spacing="none"
          text={
            '<img alt="demonstration of learning environment" src="//images.ctfassets.net/go6kr6r0ykrq/2vjTCK9DmJ6BOd5NtFxNIG/e5ced4209aef5241cd581841fa6e2511/learn-css_box-model_06.16.gif">'
          }
        />
      </Column>
    </LayoutGrid>
  </Story>
</Canvas>

If you need to override a link, iframe, or table, you do not need to provide the `skipDefaultOverides` prop. This prop is now only used for removing the default heading, paragraph, and list element overrides.

<Canvas>
  <Story
    name="Link Overrides"
    args={{
      text: '[This was a link](https://codecademy.com), Now it is not.',
      overrides: {
        a: {
          component: (props) => <Text {...props} as="span" color="blue-500" />,
        },
      },
    }}
  >
    {(args) => <Markdown {...args} />}
  </Story>
</Canvas>

## Inline Markdown

<Canvas>
  <Story
    name="Inline Markdown"
    args={{ text: `this is an inline markdown component`, inline: true }}
  >
    {(args) => (
      <>
        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod
        tempor incididunt ut labore et dolore magna aliqua.
        <Markdown {...args} />
        Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi
        ut aliquip ex ea commodo consequat. Duis aute irure dolor in
        reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla
        pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa
        qui officia deserunt mollit anim id est laborum.
      </>
    )}
  </Story>
</Canvas>
