import { DataList } from '@codecademy/gamut';
import title from '@codecademy/macros/lib/title.macro';
import { PropsTable } from '@codecademy/storybook-addon-variance';
import { Meta, Story } from '@storybook/addon-docs/blocks';

import { DataListTemplate } from './examples.tsx';

<Meta
  title={title}
  component={DataList}
  parameters={{
    subtitle: 'Render lists of content with sorting and selection',
    source: 'gamut',
    status: 'current',
    design: {
      type: 'figma',
      url: 'https://www.figma.com/file/',
    },
  }}
  args={{
    id: 'crew',
    idKey: 'name',
    query: { sort: { name: 'desc', role: 'asc' } },
    rows: [
      { name: 'Jean Luc Picard', role: 'Captain', ship: 'USS Enterprise' },
      {
        name: 'Wesley Crusher',
        role: 'Deus Ex Machina',
        ship: 'USS Enterprise',
      },
      {
        name: 'Geordie LaForge',
        role: 'Chief Engineer / Rascal',
        ship: 'Borg Cube',
      },
      {
        name: 'Data',
        role: 'Lt. Commander / Scamp',
        ship: 'He is a ship',
      },
    ],
    columns: [
      { label: 'Name', key: 'name', size: 'lg', sortable: true },
      { label: 'Rank', key: 'role', size: 'lg', sortable: true },
      { label: 'Ship', key: 'ship', size: 'lg', sortable: true, fill: true },
    ],
    selectedRows: ['Jean Luc Picard'],
    expandedRows: ['Geordie LaForge'],
    variant: 'table',
    spacing: 'condensed',
    renderExpanded: ({ name }) => <>{name}: This is pretty cool</>,
  }}
/>

## Usage

```tsx
const DataTown = () => {
  const [selectedRows, setSelectedRows] = useState([]);
  const [expandedRows, setExpandedRows] = useState([]);

  const queryData = useLocalQuery({
    idKey: 'name',
    rows: crew,
    columns: [{
      { key: 'name', sortable: true, size: 'sm'},
      { key: 'ship', sortable: true, size: 'sm'}
    }],
  });

  return (
    <DataList
      id="example"
      selectedRows={selectedRows}
      onRowSelect={setSelectedRows}
      expandedRows={expandedRows}
      onRowExpand={setExpandedRows}
      renderExpanded={({ name }) => <>{name}: This is pretty cool</>}
      {...queryData}
    />
  );
};
```

<br />

### Columns

Column Options:

<Story name="Demo">
  <DataListTemplate />
</Story>

<br />

### Empty

<Story name="Empty" args={{ rows: [] }}>
  {(args) => <DataList {...args} />}
</Story>

<br />

### Loading

<Story name="Loading" args={{ loading: true }}>
  {(args) => <DataList {...args} />}
</Story>

<br />

### Shadowed

<Story name="Shadow" args={{ shadow: true }}>
  {(args) => <DataList {...args} />}
</Story>

<br />

### Code Playground

<Story name="DataList">{(args) => <DataList {...args} />}</Story>

<br />
<br />
<br />

<PropsTable story="DataList" />
