import { ConnectedForm } from '@codecademy/gamut';
import title from '@codecademy/macros/lib/title.macro';
import { Meta } from '@storybook/addon-docs/blocks';

import {
  FancyConnectedFormExample,
  VeryCoolForm,
} from './ConnectedForm.examples';

<Meta
  title={title}
  component={ConnectedForm}
  parameters={{
    subtitle: 'The special sauce to creating modular forms',
    source: 'gamut',
    status: 'current',
    design: {
      type: 'figma',
      url:
        'https://www.figma.com/file/ReGfRNillGABAj5SlITalN/%F0%9F%93%90-Gamut?node-id=1189%3A0',
    },
  }}
/>

## Usage

```tsx
export const VeryCoolForm = () => {
  const {
    ConnectedFormGroup,
    ConnectedForm,
    connectedFormProps,
  } = useConnectedForm({
    defaultValues: {
      thisField: true,
      thatField: 'zero',
      anotherField: 'state your name.',
    },
    validationRules: {
      thisField: { required: 'you need to check this.' },
      thatField: {
        pattern: {
          value: /^(?:(?!zero).)*$/,
          message: 'literally anything but zero',
        },
      },
    },
  });

  return (
    <Background bg="black" p={48}>
      <ConnectedForm
        onSubmit={({ thisField }) => console.log(thisField)}
        {...connectedFormProps}
      >
        <ConnectedFormGroup
          name="thisField"
          label="cool"
          field={{
            component: ConnectedCheckbox,
            label: 'check it ouuuut',
          }}
        />
        <Box>
          <Text>I have something important to tell you...</Text>
          <SubmitButton variant="secondary" m={32}>
            submit this form.
          </SubmitButton>
        </Box>
        <ConnectedFormGroup
          name="thatField"
          label="cool"
          field={{
            component: ConnectedSelect,
            options: ['one', 'two', 'zero'],
          }}
        />
        <ConnectedFormGroup
          name="anotherField"
          label="cool"
          field={{
            component: ConnectedInput,
            icon: TerminalIcon,
          }}
        />
      </ConnectedForm>
    </Background>
  );
};
```

<VeryCoolForm />

## Fancy Examples

<FancyConnectedFormExample />
