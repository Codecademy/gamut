import { Popover } from '@codecademy/gamut-labs/src';
import { ColorMode } from '@codecademy/gamut-styles/src';
import title from '@codecademy/macros/lib/title.macro';
import { PropsTable } from '@codecademy/storybook-addon-variance';
import { Canvas, Meta, Story } from '@storybook/addon-docs/blocks';

import {
  PatternedPopoversGrid,
  PopoverExample,
  PopoverWithoutFocus,
} from './Popover.examples';

<Meta
  title={title}
  component={Popover}
  parameters={{
    subtitle: `Popover is a surface which takes a target element and shows an overlay
positioned around that element.`,
    source: 'gamut-labs',
    status: 'updating',
  }}
/>

<Canvas>
  <Story name="Popover">
    {(args) => {
      return <PopoverExample {...args} />;
    }}
  </Story>
</Canvas>

<PropsTable story="Popover" />

## Beak

Using the beak prop, you can add a beak to the popover.

<Canvas>
  <Story name="Beak">
    {(args) => {
      return <PopoverExample {...args} beak="left" />;
    }}
  </Story>
</Canvas>

## Outline

Using the outline prop, you can add an outline to the popover.
The outline color is theme.colors.secondary

<Canvas>
  <Story name="Outline">
    {(args) => {
      return <PopoverExample {...args} outline />;
    }}
  </Story>
</Canvas>

In dark mode, outline will be white.

<Canvas>
  <Story name="Dark" args={{ mode: 'dark' }}>
    {(args) => {
      return (
        <ColorMode mode="dark">
          <PopoverExample {...args} outline />
        </ColorMode>
      );
    }}
  </Story>
</Canvas>

## Patterns

Using the pattern prop, you can apply a patterned background to the popover.

<Canvas>
  <Story name="Patterns">
    {(args) => {
      return <PatternedPopoversGrid {...args} />;
    }}
  </Story>
</Canvas>

## When the popover has no focusable element

When there is no focusable child element in the popover, the popover container will receive focus.
This is to resolve the error that the focus trap throws when there is no focusable element.

<Canvas>
  <Story name="Popover (without focusable element)">
    {(args) => {
      return <PopoverWithoutFocus {...args} />;
    }}
  </Story>
</Canvas>
