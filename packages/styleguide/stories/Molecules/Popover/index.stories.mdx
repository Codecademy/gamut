import { Popover } from '@codecademy/gamut/src';
import title from '@codecademy/macros/lib/title.macro';
import { PropsTable } from '@codecademy/storybook-addon-variance';
import { Canvas, Meta, Story } from '@storybook/addon-docs/blocks';

import { LinkTo } from '~styleguide/blocks';

import {
  PatternedPopoversGrid,
  PopoverExample,
  PopoverWithoutFocus,
} from './Popover.examples';

<Meta
  title={title}
  component={Popover}
  parameters={{
    subtitle: `Popover is a surface which takes a target element and shows an overlay
positioned around that element.`,
    source: 'gamut',
    status: 'updating',
  }}
  args={{
    children: undefined,
  }}
/>

Popovers are generally used for interactive contents, such as new and exciting features for users to try.

> If you'd like smaller, non-interactive contents, use a <LinkTo id="atoms-tooltip--tool-tip">ToolTip</LinkTo>.

<Canvas>
  <Story name="Popover">
    {(args) => {
      return <PopoverExample {...args} />;
    }}
  </Story>
</Canvas>

<PropsTable story="Popover" />

## Beak

Using the beak prop, you can add a beak to the popover.

<Canvas>
  <Story name="Beak">
    {(args) => {
      return <PopoverExample {...args} beak="left" />;
    }}
  </Story>
</Canvas>

Tooltips with a _centered_ beak -`center`- are smaller sized and meant for a single small number of words, like keyboard shortcuts. Similar to the center aligned [tooltips](http://localhost:6006/?path=/docs/atoms-tooltip--smaller-alignment#smaller-alignments)

<Canvas>
  <Story name="Center Beak">
    {(args) => {
      return <PopoverExample {...args} beak="center" p={0} />;
    }}
  </Story>
</Canvas>

## Outline

Using the outline prop, you can add an outline to the popover.
The outline color is theme.colors.secondary so in Dark Mode, the outline will be white. Please swap the ColorMode in the toolbar above to check this out in action!

<Canvas>
  <Story name="Outline">
    {(args) => {
      return <PopoverExample {...args} outline />;
    }}
  </Story>
</Canvas>

## Patterns

Using the pattern prop, you can apply a patterned background to the popover.

<Canvas>
  <Story name="Patterns">
    {(args) => {
      return <PatternedPopoversGrid {...args} />;
    }}
  </Story>
</Canvas>

## When the popover has no focusable element

When there is no focusable child element in the popover, the popover container will receive focus.
This is to resolve the error that the focus trap throws when there is no focusable element.

<Canvas>
  <Story name="Popover (without focusable element)">
    {(args) => {
      return <PopoverWithoutFocus {...args} />;
    }}
  </Story>
</Canvas>

## Animation

Adds a 'fade' animation to Popovers - should only be usef when specified within designs.

<Canvas>
  <Story name="Animation">
    {(args) => {
      return <PopoverWithoutFocus animation="fade" {...args} />;
    }}
  </Story>
</Canvas>

## Variant

Popovers have a secondary, tooltip-esque variant style that have a smaller beak, padding, + base font size, and different background colors. Check it out in light mode and dark mode!

<Canvas>
  <Story name="Variant">
    {(args) => {
      return <PopoverExample variant="secondary" beak="left" {...args} />;
    }}
  </Story>
</Canvas>
