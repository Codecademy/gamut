import { Column, LayoutGrid, Menu } from '@codecademy/gamut';
import title from '@codecademy/macros/lib/title.macro';
import { PropsTable } from '@codecademy/storybook-addon-variance';
import { Canvas, Meta, Story } from '@storybook/addon-docs/blocks';
import LinkTo from '@storybook/addon-links/react';

import { MenuItemsExample, PopoverMenuExample } from './Menu.examples.tsx';

<Meta
  title={title}
  component={Menu}
  parameters={{
    subtitle: 'Menu list components',
    source: 'gamut',
    status: 'current',
    design: {
      type: 'figma',
      url: 'https://www.figma.com/file/r5Y0iuLDFPXy8SmYX1UW2H',
    },
  }}
  argTypes={{
    children: {
      table: {
        disable: true,
      },
    },
  }}
  args={{
    variant: 'select',
    spacing: 'normal',
    children: <MenuItemsExample type="default" />,
  }}
/>

While most Menus are used as layout elements, Menus can also be used as popover elements within components like Selects.

## Components

- `Menu`: An unordered list that defines the structure and style of its constituents. Menus are nestable and keep track of their configuration and depth through the MenuContext.
- `MenuItem`: A clickable list item that renders as a link or a clickable `li` element if a href is specified.
- `MenuSeparator`: A semantic element for separating `li` items visually. This element will not display if used outside of `action` menus.

## Usage

```tsx
import { Menu, MenuItem, MenuSeparator } from '@codecademy/gamut';

const MyMenu = () => (
  <Menu variant="action">
    <MenuItem>Item 1</MenuItem>
    <MenuSeparator />
    <MenuItem href="cool">Link 1</MenuItem>
  </MenuSeparator>
);
```

## Variants

<LayoutGrid gap={32} py={24}>
<Column size={4} variant={false} mx={8}>

### Select

<Story name="Select" args={{ variant: 'select' }}>
  {(args) => <Menu {...args} />}
</Story>

</Column>
<Column size={4} variant={false}>

### Action

<Story name="Action" args={{ variant: 'action' }}>
  {(args) => (
    <Menu {...args}>
      <MenuItemsExample type="button" />
    </Menu>
  )}
</Story>

</Column>
<Column size={4} variant={false}>

### Navigation

<Story name="Navigation" args={{ variant: 'navigation' }}>
  {(args) => (
    <Menu {...args}>
      <MenuItemsExample type="link" />
    </Menu>
  )}
</Story>

</Column>
</LayoutGrid>

## Spacing Variants

<LayoutGrid gap={32} py={24}>
<Column size={4} variant={false}>

### Select Condensed

<Story
  name="Select Condensed"
  args={{ variant: 'select', spacing: 'condensed' }}
>
  {(args) => (
    <Menu {...args}>
      <MenuItemsExample type="link" />
    </Menu>
  )}
</Story>

</Column>
<Column size={4} variant={false}>

### Action Condensed

<Story
  name="Action Condensed"
  args={{ variant: 'action', spacing: 'condensed' }}
>
  {(args) => <Menu {...args} />}
</Story>

</Column>
<Column size={4} variant={false}>

### Condensed Nav

<Story
  name="Navigation Condensed"
  args={{ variant: 'navigation', spacing: 'condensed' }}
>
  {(args) => <Menu {...args} />}
</Story>

</Column>
</LayoutGrid>

## Popover Menus

You can create popover menus by utilizing our <LinkTo kind="Atoms/PopoverContainer">PopoverContainer</LinkTo>. Once you have your base positioning, you just need to adjust the `y` axis by `48` for the `normal` spacing or `32` for the `condensed` spacing for each of the `MenuItem`s. You may also need to change the `alignment` of the `PopoverContainer` to ensure correct positioning.

Click through each item to see how the `Menu`s appear (and disappear when the item is clicked again, or another item is selected.)

<PopoverMenuExample />

### Code Playground

Edit attributes and see whatâ€™s possible to do with this component or get the exact output you want.

<Canvas>
  <Story name="Menu">{(args) => <Menu {...args} />}</Story>
</Canvas>

<PropsTable story="Menu" />
