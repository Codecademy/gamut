import { Alert, Alerts, Box } from '@codecademy/gamut/src';
import { Card, Text } from '@codecademy/gamut-labs/src';
import { GlobalHeader } from '@codecademy/gamut-labs/src/experimental/GlobalHeader/index.tsx';
import title from '@codecademy/macros/lib/title.macro';
import { Canvas, Meta, Props, Story } from '@storybook/addon-docs/dist/blocks';

import { ALERTS } from './constants';

<Meta
  title={title}
  component={Alert}
  parameters={{
    subtitle:
      'An alert displays an important, succinct message, and provides actions for users to address (or dismiss the alert). It requires a user action to be dismissed.',
    status: 'volatile',
    source: 'gamut',
    figmaId: 'TemYhRWOavsERWprDzRJCx',
  }}
  args={{
    variant: 'general',
    cta: 'Learn more',
    message:
      'You have been logged out due to inactivity. Click the button to log in again.',
  }}
/>

## Usage Guidelines

- Alerts should be displayed at the top of the page, below the navigation bar. (40px)
- They’re persistent and non-modal, allowing the user to either ignore them or interact with them at any time.
- Floats/overlays over any content below it
- Only use Feature alert for product/feature announcements that are specific to that page (e.g. Dashboard, Catalog, Profile, LE)

<Canvas>
  <Story name="Alert">{(args) => <Alert {...args} />}</Story>
</Canvas>

<Props story="Alert" />

## Alert Variants

<Canvas isColumn>
  <Story name="general" args={ALERTS.general}>
    {(args) => <Alert {...args} />}
  </Story>
  <Story name="success" args={ALERTS.success}>
    {(args) => <Alert {...args} />}
  </Story>
  <Story name="error" args={ALERTS.error}>
    {(args) => <Alert {...args} />}
  </Story>
  <Story name="maintenance" args={ALERTS.maintenance}>
    {(args) => <Alert {...args} />}
  </Story>
  <Story name="feature" args={ALERTS.feature}>
    {(args) => <Alert {...args} />}
  </Story>
</Canvas>

## Truncated message

<Canvas>
  <Story
    name="Truncated"
    args={{
      message:
        'You can now do this new thing with this new feature we just added! Maintenance: Codecademy will be offline between 02:00 AM and 08:00 AM.  Couldn’t save your account changes because there is connection.',
    }}
  >
    {(args) => <Alert {...args} />}
  </Story>
</Canvas>

## No CTA

<Canvas>
  <Story name="No CTA" args={{ cta: undefined }}>
    {(args) => <Alert {...args} />}
  </Story>
</Canvas>

## Stacked Alerts

<Canvas isColumn>
  <Story
    name="Stacked"
    args={{
      id: 'stacked',
      alerts: [ALERTS.general, ALERTS.maintenance, ALERTS.feature],
    }}
  >
    {(args) => <Alerts {...args} />}
  </Story>
  <Story
    name="priority"
    args={{
      id: 'priority',
      alerts: [ALERTS.feature, ALERTS.general, ALERTS.success],
    }}
  >
    {(args) => <Alerts {...args} />}
  </Story>
</Canvas>

## Positioning

<Canvas>
  <Story
    name="inline"
    args={{
      placement: 'inline',
      alerts: [
        {
          ...ALERTS.error,
          message: 'You messed up something please try again',
        },
      ],
    }}
    decorators={[
      (Story) => (
        <Card variant="white" width="600px" minHeight="20rem" padding={32}>
          <Text fontFamily="accent" fontSize={36}>
            Inline Form
          </Text>
          {Story()}
          <Text fontSize={16}>Some asynchronous validation</Text>
        </Card>
      ),
    ]}
  >
    {(args) => <Alerts {...args} />}
  </Story>
</Canvas>

<Canvas>
  <Story
    name="top-center"
    parameters={{
      container: {
        position: 'relative',
        display: 'flex',
        justifyContent: 'center',
        minHeight: '300px',
        width: '100%',
        overflow: 'hidden',
        backgroundColor: 'beige',
      },
    }}
    decorators={[
      (Story) => (
        <>
          <Box height="3.75rem" width="100%">
            <GlobalHeader type="pro" />
          </Box>
          <>{Story()}</>
        </>
      ),
    ]}
    args={{
      id: 'top',
      placement: 'top-center',
      alerts: [ALERTS.feature, ALERTS.general, ALERTS.success],
    }}
  >
    {(args) => <Alerts {...args} />}
  </Story>
</Canvas>
