import { FillButton,ModalDeprecated } from '@codecademy/gamut/src';
import title from '@codecademy/macros/lib/title.macro';
import { PropsTable } from '@codecademy/storybook-addon-variance';
import { Canvas, Meta, Story } from '@storybook/addon-docs/blocks';
import { useState } from 'react';

import { LinkTo } from '~styleguide/blocks';

<Meta
  title={title}
  component={ModalDeprecated}
  parameters={{
    subtitle: `Please see the Modal page for all new Modals.`,
    status: 'deprecated',
    source: 'gamut',
    design: {
      type: 'figma',
      url: 'https://www.figma.com/file/yt7NdZTETDRPUn0CtRu3v0',
    },
  }}
/>

<Canvas>
  <Story name="ModalDeprecated">
    {() => {
      const [isOpen, setIsOpen] = useState(false);
      return (
        <>
          <FillButton onClick={() => setIsOpen(true)}>
            Open
          </FillButton>
          <ModalDeprecated
            isOpen={isOpen}
            onRequestClose={() => setIsOpen(false)}
          >
            Close the ModalDeprecated!
          </ModalDeprecated>
        </>
      );
    }}
  </Story>
</Canvas>

> Prefer <LinkTo component="Modal">Modal</LinkTo> instead.

<PropsTable story="ModalDeprecated" />

### Creating a custom close button

By default, the ModalDeprecated will render a close button.

You can disable the default close button with the `hideDefaultCloseButton` prop.

You can then use the `isOpen` prop to create other controls that toggle the ModalDeprecated on and off.

<Canvas>
  <Story name="Without Close Default">
    {() => {
      const [isOpen, setIsOpen] = useState(false);
      return (
        <>
          <FillButton onClick={() => setIsOpen(true)}>
            Open
          </FillButton>
          <ModalDeprecated
            isOpen={isOpen}
            hideDefaultCloseButton
            onRequestClose={() => setIsOpen(false)}
          >
            <p>Close the ModalDeprecated...</p>
            <FillButton block onClick={() => setIsOpen(false)}>
              with this button instead
            </FillButton>
          </ModalDeprecated>
        </>
      );
    }}
  </Story>
</Canvas>

### Alternative closing methods

Other than creating buttons that can close the ModalDeprecated, there are other ways a ModalDeprecated can be closed by the user.

1. Clicking the content outside of the ModalDeprecated
2. Clicking the escape key on their keyboard

All of these methods default to true for accessibility reasons, and rely on setting the required `onRequestClose` prop and making sure it toggles the `isOpen` prop on the ModalDeprecated.

<Canvas>
  <Story name="Clicking Outside">
    {() => {
      const [isOpen, setIsOpen] = useState(false);
      return (
        <>
          <FillButton onClick={() => setIsOpen(true)}>
            Open
          </FillButton>
          <ModalDeprecated
            isOpen={isOpen}
            hideDefaultCloseButton
            onRequestClose={() => setIsOpen(false)}
          >
            <p>
              Close this ModalDeprecated by clicking the page outside of the
              ModalDeprecated content, or by clicking the escape key.
            </p>
          </ModalDeprecated>
        </>
      );
    }}
  </Story>
</Canvas>
