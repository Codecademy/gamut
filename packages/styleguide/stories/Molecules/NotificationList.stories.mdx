import { NotificationList } from '@codecademy/gamut/src';
import title from '@codecademy/macros/lib/title.macro';
import { PropsTable } from '@codecademy/storybook-addon-variance';
import { action } from '@storybook/addon-actions';
import { Canvas, Meta, Story } from '@storybook/addon-docs';

import { CustomCheckbox } from '../Atoms/FormInputs/examples';

export const notifications = [
  {
    campaign: 'python-livestream',
    date: '5 minutes',
    type: 'curriculum_blast',
    id: 'abc',
    link:
      'https://www.codecademy.com/courses/livestreams/projects/livestream-intro-to-statistics-in-python',
    text: 'Check out our Python livestream!',
  },
  {
    campaign: 'pro-trial',
    type: 'marketing_blast',
    date: '3 hours',
    id: '1237',
    text:
      'Meet your fellow learners and stay motivated. Join the conversation in your cohort!',
  },
  {
    campaign: 'cohort v0.2',
    date: '1 hour',
    id: '333',
    text: 'Welcome to you Front-End Cohort!',
    type: 'cohort_blast',
  },
  {
    campaign: 'other-notification',
    date: '2 days',
    id: '1234',
    link: 'http://google.com',
    imageUrl: 'https://bit.ly/2Ckp4eW',
    text: 'notiifcation with img url provided',
  },
  {
    campaign: 'discourse-comment',
    date: '1 hour',
    id: '333',
    link: 'https://discuss.codecademy.com',
    text: 'discourse comment notification',
    type: 'forum_comment',
  },
  {
    campaign: 'discourse-message',
    date: '1 minute',
    id: '444',
    link: 'https://discuss.codecademy.com',
    text: 'discourse message notification',
    type: 'forum_message',
  },
  {
    campaign: 'discourse-mention',
    date: '10 minutes',
    id: '444',
    link: 'https://discuss.codecademy.com',
    text: 'discourse mention notification',
    type: 'forum_mention',
  },
  {
    campaign: 'discourse-like',
    date: '3 minutes',
    id: '555',
    link: 'https://discuss.codecademy.com',
    text: 'discourse like notification',
    type: 'forum_like',
  },
  {
    campaign: 'pro-trial',
    date: '3 hours',
    id: '123',
    text: 'Notification with no image or type provided; default Bell icon!',
  },
  {
    campaign: 'same-tab',
    date: '5 hours',
    id: '1',
    link: window.location.origin,
    text: 'Notification with an internal link (opens in the same tab)',
  },
  {
    campaign: 'new-tab',
    date: '5 hours',
    id: '2',
    link: 'https://help.codecademy.com',
    text: 'Notification with an external link (opens in a new tab)',
  },
];

<Meta
  title={title}
  component={NotificationList}
  parameters={{
    subtitle: '',
    source: 'gamut',
    status: 'current',
    design: {
      type: 'figma',
      url:
        'https://www.figma.com/file/ReGfRNillGABAj5SlITalN/%F0%9F%93%90-Gamut?node-id=1086%3A105',
    },
  }}
  args={{
    notifications,
    onDismiss: () => {
      action('notification dismissed');
    },
  }}
/>

Displays a list of notifications. Each notification displays an icon corresponding to its notification type (ex. curriculum_blast or marketing_blast). If no type is provided, a default bell icon will be displayed.

Sometimes the teams sending a notification would like to choose a unique icon for their notification. If an imageUrl is provided, the notification will show the chosen image instead of the type icon. The recommendation from design, however, is to use the designated types.

<Canvas>
  <Story name="NotificationList">
    {(args) => <NotificationList {...args} />}
  </Story>
</Canvas>

<PropsTable story="NotificationList" />

## Writing Tips

When writing copy for a notification, keep it brief, make it actionable, and ensure the messaging is in support of the learnerâ€™s journey. Refer to the checklist below for guidance.

<CustomCheckbox
  htmlFor="notification-1"
  label="Only use a notification when there is a relevant action for the learner to take."
  spacing="tight"
/>
<CustomCheckbox
  htmlFor="notification-2"
  label="Ensure that the action is clear."
  spacing="tight"
/>
<CustomCheckbox
  htmlFor="notification-3"
  label="Keep notifications to 86 characters or less (a maximum of 3 lines)."
  spacing="tight"
/>

## Empty Notification

Notifications are not always present, so this has an empty state.
Empty Notification content (message and image) is selected at random.

<Canvas>
  <Story name="Empty" args={{ notifications: [] }}>
    {(args) => <NotificationList {...args} />}
  </Story>
</Canvas>
