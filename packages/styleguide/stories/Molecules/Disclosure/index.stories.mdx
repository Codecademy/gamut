import { Disclosure } from '@codecademy/gamut';
import title from '@codecademy/macros/lib/title.macro';
import { PropsTable } from '@codecademy/storybook-addon-variance';
import { Canvas, Meta, Story } from '@storybook/addon-docs/blocks';

import {
  BackgroundWithPadding,
  ConstrainedText,
  ListDisclosureExample,
} from './examples';

<Meta
  title={title}
  component={Disclosure}
  parameters={{
    subtitle:
      'A Disclosure is an expandable container featuring a heading that serves as a toggle to expand or collapse a content section.',
    source: 'gamut',
    status: 'current',
    padded: true,
    design: {
      type: 'figma',
      url:
        'https://www.figma.com/file/ReGfRNillGABAj5SlITalN/%F0%9F%93%90-Gamut?node-id=30186-40432&m=dev',
    },
  }}
  args={{
    heading: 'Disclosure heading',
    body: 'Disclosure body.',
  }}
/>

<Story name="Disclosure">{(args) => <Disclosure {...args} />}</Story>

## Usage

Use a Disclosure to progressively reveal information, giving users the option to access additional details as needed. By initially hiding less immediately relevant information, it minimizes cognitive load and boosts content scannability.

If you need to use multiple Disclosures, use the List component with `<ExpandableRowClick>` for the time being.

## Variants

Disclosure has 3 variants for background color (`'default'`, `'subtle', 'transparent'`), a state of `hasBorder` to render a 1px solid black border, and 3 spacing options (`'normal'`, `'condensed'`, `'compact'`). Check the Figma design to apply the correct styling.

### Background and Border variants

<Canvas>
  <Story
    name="default"
    args={{
      heading: 'default',
      body: 'Uses `background`',
    }}
  >
    {(args) => (
      <BackgroundWithPadding bg="background-primary" hasBorder>
        <Disclosure {...args} />
      </BackgroundWithPadding>
    )}
  </Story>
</Canvas>

<Canvas>
  <Story
    name="subtleBgBordered"
    args={{
      variant: 'subtle',
      heading: 'subtle',
      body:
        'Uses `background-selected`. For this example there is a `<Background>` set to `"background-primary"`.',
    }}
  >
    {(args) => (
      <BackgroundWithPadding bg="background-primary">
        <Disclosure {...args} />
      </BackgroundWithPadding>
    )}
  </Story>
</Canvas>

<Canvas>
  <Story
    name="transparent"
    args={{
      variant: 'transparent',
      heading: 'transparent',
      body:
        'Notice the border and it uses `background-current` to inherit the existing background color.',
    }}
  >
    {(args) => (
      <BackgroundWithPadding bg="background-primary">
        <Disclosure {...args} />
      </BackgroundWithPadding>
    )}
  </Story>
</Canvas>

<Canvas>
  <Story
    name="hasBorder"
    args={{
      heading: 'hasBorder (set to false)',
      body: 'This is a `default` variant without a border',
      hasBorder: false,
    }}
  >
    {(args) => (
      <BackgroundWithPadding bg="background-primary" hasBorder>
        <Disclosure {...args} />
      </BackgroundWithPadding>
    )}
  </Story>
</Canvas>

### Spacing Options

`spacing` is an optional prop you can pass to `<Disclosure>`. By default it's set to `"normal"`, though you can set it to `"condensed"` or `"compact"` as well. Spacing will determine the height of the heading, the size of the chevron icon, as well as the padding of both the heading and the body.

<Canvas>
  <Story
    name="Normal spacing"
    args={{
      heading: 'Normal spacing',
      body:
        'Lorem ipsum dolor sit amet consectetur. Ut consectetur adipiscing a donec sed volutpat. Tempor risus rhoncus quisque vel sit mattis. Accumsan vel posuere tortor sit mattis augue congue sit.',
    }}
  >
    {(args) => <Disclosure {...args} />}
  </Story>
</Canvas>

<Canvas>
  <Story
    name="Condensed spacing"
    args={{
      heading: 'Condensed spacing',
      body:
        'Lorem ipsum dolor sit amet consectetur. Ut consectetur adipiscing a donec sed volutpat. Tempor risus rhoncus quisque vel sit mattis. Accumsan vel posuere tortor sit mattis augue congue sit.',
      spacing: 'condensed',
    }}
  >
    {(args) => <Disclosure {...args} />}
  </Story>
</Canvas>

<Canvas>
  <Story
    name="Compact spacing"
    args={{
      heading: 'Compact spacing',
      body:
        'Lorem ipsum dolor sit amet consectetur. Ut consectetur adipiscing a donec sed volutpat. Tempor risus rhoncus quisque vel sit mattis. Accumsan vel posuere tortor sit mattis augue congue sit.',
      spacing: 'compact',
    }}
  >
    {(args) => <Disclosure {...args} />}
  </Story>
</Canvas>

### List with Disclosures

<Canvas>
  <Story name="List example">
    <ListDisclosureExample />
  </Story>
</Canvas>

## Code Playground

<Canvas>
  <Story
    name="Disclosure Playground"
    args={{
      heading: "All the fixin's",
      body: ConstrainedText,
      overline: 'overline is text-secondary and fontFamily: accent',
      subheading: 'subheading is text-secondary',
      ctaText: 'Optional button - must include a callback!',
      ctaCallback: () => {},
      hasPanelBg: true,
      initiallyExpanded: true,
    }}
  >
    {(args) => <Disclosure {...args} />}
  </Story>
</Canvas>

<PropsTable story="Disclosure Playground" />
