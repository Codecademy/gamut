import { Alert, BannerType } from '@codecademy/gamut/src';
import title from '@codecademy/macros/lib/title.macro';
import { action } from '@storybook/addon-actions';
import { Canvas, Meta, Props, Story } from '@storybook/addon-docs/dist/blocks';

<Meta
  title={title}
  component={Alert}
  parameters={{
    subtitle: `
Alerts can be used to asynchronously display feedback or interactions with the user with various connotations.`,
    status: 'volatile',
    source: 'gamut',
    figmaId: 'TemYhRWOavsERWprDzRJCx',
  }}
  args={{
    showIcon: true,
    cta: { text: 'Login' },
    children:
      'You have been logged out due to inactivity. Click the button to log in again.',
    type: BannerType.Info,
    lines: 1,
  }}
/>

<Canvas withSource="open">
  <Story name="Alert">{(args) => <Alert {...args} />}</Story>
</Canvas>

<Props story="Alert" />

## Types of Alerts

### Feedback Alert

Serves as _feedback_ and confirmation that requires an
action.

#### Informational

<Canvas>
  <Story name="Information">
    {(args) => (
      <Alert
        showIcon
        type={BannerType.Info}
        cta={{ text: 'Login', onClick: action('CTA Click') }}
        onClose={action('Close')}
      >
        You have been logged out due to inactivity.
      </Alert>
    )}
  </Story>
</Canvas>

#### Successful actions

<Canvas>
  <Story name="Success">
    {(args) => (
      <Alert
        showIcon
        type={BannerType.Success}
        cta={{ text: 'view account', onClick: action('CTA Click') }}
        onClose={action('Close')}
      >
        Your account changes were saved successfully.
      </Alert>
    )}
  </Story>
</Canvas>

#### Error communicating an issue or showing that a user’s action can’t be completed.

<Canvas>
  <Story name="Error">
    {(args) => (
      <Alert
        showIcon
        type={BannerType.Error}
        cta={{ text: 'retry', onClick: action('CTA Click') }}
        onClose={action('Close')}
      >
        Couldn’t save your account changes because a connection to the server
        can’t be made.
      </Alert>
    )}
  </Story>
</Canvas>

### Notice Alert

Only shown when it affects the entire system. It appears on all pages without user initiating the action.

<Canvas>
  <Story name="Notice">
    {(args) => (
      <Alert
        showIcon
        type={BannerType.Notice}
        cta={{ text: 'retry', onClick: action('CTA Click') }}
        onClose={action('Close')}
      >
        Couldn’t save your account changes because a connection to the server
        can’t be made.
      </Alert>
    )}
  </Story>
</Canvas>

### Announcement Alert

For feature announcements/changes on a specific page.

<Canvas>
  <Story name="Announcement">
    {(args) => (
      <Alert
        showIcon
        type={BannerType.Announcement}
        cta={{ text: 'Learn More', onClick: action('CTA Click') }}
        onClose={action('Close')}
      >
        You can now do this new thing with this new feature we just added!
      </Alert>
    )}
  </Story>
</Canvas>

## Customization

Alerts can be customized in various ways to fit usages. Here are a few out of the box options you have available.

### Skeletal Alert

You can disable most options for an `Alert` to make it mostly informational with no interaction.

<Canvas>
  <Story name="Skeletal">
    {(args) => (
      <Alert
        showIcon={false}
        type={BannerType.Notice}
        onClose={action('Close')}
      >
        Lorem ipsum dolor sit amet, blandit detracto vis an, purto latine
        torquatos eam ut.
      </Alert>
    )}
  </Story>
</Canvas>

### Icon

You can optionally display an icon that matches the type of the alert you are showing.

<Canvas>
  <Story name="Icon">
    {(args) => (
      <Alert type={BannerType.Notice} onClose={action('Close')}>
        Lorem ipsum dolor sit amet, blandit detracto vis an, purto latine
        torquatos eam ut.
      </Alert>
    )}
  </Story>
</Canvas>

### Call to action

You can add a call to action if specific feedback prompts user action. This is not required as some
feedback may not have an activity associated with it. By default the CTA will open in a new tab.

<Canvas>
  <Story name="Call to Action">
    {(args) => (
      <Alert
        showIcon={false}
        type={BannerType.Notice}
        cta={{
          href: 'https://google.com',
          onClick: action('Close'),
          text: 'Click Me',
        }}
        onClose={action('Close')}
      >
        Lorem ipsum dolor sit amet, blandit detracto vis an, purto latine
        torquatos eam ut.
      </Alert>
    )}
  </Story>
</Canvas>

You may optionally specify if you don't want the cta to open in a new tab.

<Canvas>
  <Story name="Call to action that opens in the same tab">
    {(args) => (
      <Alert
        showIcon={false}
        type={BannerType.Notice}
        cta={{
          href: 'https://google.com',
          onClick: action('Close'),
          text: 'Click Me',
          openInSameTab: true,
        }}
        onClose={action('Close')}
      >
        This cta does not open in a new tab.
      </Alert>
    )}
  </Story>
</Canvas>

### Expandable Alert

You can truncate the message of the alert for dynamic messaging that may be too long to display
without restriction. This will automatically truncate and add a toggle button.

<Canvas>
  <Story name="Expandable">
    {(args) => (
      <Alert
        showIcon={false}
        type={BannerType.Notice}
        lines={1}
        onClose={action('Close')}
      >
        Lorem ipsum dolor sit amet, blandit detracto vis an, purto latine
        torquatos eam ut. Dicta dolores adversarium mei in. Ius ei ridens
        mentitum consequat. Amet intellegam in nec. Pro duis novum ludus ad.
      </Alert>
    )}
  </Story>
</Canvas>

### Permanent Alert

If your alert should always stay on the page, you can skip giving it a close button on the right.
Please remember that most of these are rather frustrating for users.

<Canvas>
  <Story name="Permanent">
    {(args) => (
      <Alert showIcon={false} type={BannerType.Notice} lines={1}>
        Lorem ipsum dolor sit amet, blandit detracto vis an, purto latine
        torquatos eam ut. Dicta dolores adversarium mei in. Ius ei ridens
        mentitum consequat. Amet intellegam in nec. Pro duis novum ludus ad.
      </Alert>
    )}
  </Story>
</Canvas>

### All Options

<Canvas>
  <Story name="All Options">
    {(args) => (
      <Alert
        type={BannerType.Notice}
        cta={{
          href: 'https://google.com',
          onClick: action('Close'),
          text: 'Click Me',
        }}
        lines={1}
        onClose={action('Close')}
      >
        Lorem ipsum dolor sit amet, blandit detracto vis an, purto latine
        torquatos eam ut. Dicta dolores adversarium mei in. Ius ei ridens
        mentitum consequat. Amet intellegam in nec. Pro duis novum ludus ad.
      </Alert>
    )}
  </Story>
</Canvas>
