import { Box, IconButton } from '@codecademy/gamut/src';
import { BellIcon, PersonIcon, SearchIcon } from '@codecademy/gamut-icons/src';
import { GlobalHeader } from '@codecademy/gamut-labs/src/experimental/GlobalHeader/index.tsx';
import { Canvas, Meta, Props, Story } from '@storybook/addon-docs/dist/blocks';

<Meta
  title="Labs/Experimental/Molecules/GlobalHeader"
  component={GlobalHeader}
  parameters={{
    layout: 'padded',
    status: 'volatile',
    subtitle:
      'Header for a unified Codecademy global navigation system, meant to be consumed by any entity which requires a standard Codecademy header.',
  }}
/>

## GlobalHeader

<Canvas withSource="open">
  <Story name="GlobalHeader">
    {(args) => <GlobalHeader variant={{ onClick: () => {}, type: 'free' }} />}
  </Story>
</Canvas>

GlobalHeader takes in two props. The first, `variant`, is of type `AnonHeader` (the header for anonymous visitor/logged-out user), `FreeHeader` (the header for a user with a free account), or `ProHeader` (the header for a user with a pro membership). The `variant` tells us 1) what type of user we have, so we can get the header items for that user and 2) whether we need to render the Search, Notification, and Profile components.

The second prop, `onClick`, is of type `AppHeaderClickHandler`, This will be defined by the consumer, and handle any routing/tracking that needs to be done.

<Props of={GlobalHeader} />

## GlobalHeader Variants

The following are available variations for the GlobalHeader component.

### Free User

<Canvas>
  <Story name="Free User Global Header">
    {(args) => <GlobalHeader onClick={() => {}} variant={{ type: 'free' }} />}
  </Story>
</Canvas>

### Pro User

<Canvas>
  <Story name="Pro User Global Header">
    {(args) => <GlobalHeader onClick={() => {}} variant={{ type: 'pro' }} />}
  </Story>
</Canvas>

### Anonymous User

<Canvas>
  <Story name="Anonymous User Global Header">
    {(args) => <GlobalHeader onClick={() => {}} variant={{ type: 'anon' }} />}
  </Story>
</Canvas>

### GlobalHeader With Search, Notifications, and Profile Dropdown

To mock this, IconButtons are provided as placeholders.

<Canvas>
  <Story name="GlobalHeader Search Notifications Profile">
    {(args) => (
      <GlobalHeader
        onClick={() => {}}
        variant={{
          renderNotifications: () => <IconButton icon={BellIcon} />,
          renderProfile: () => <IconButton icon={PersonIcon} />,
          renderSearch: () => <IconButton icon={SearchIcon} />,
          type: 'pro',
        }}
      />
    )}
  </Story>
</Canvas>

### GlobalHeader Over Background Color

<Canvas>
  <Story name="Background Color GlobalHeader">
    {(args) => (
      <Box backgroundColor="beige" width="100%">
        <GlobalHeader onClick={() => {}} variant={{ type: 'anon' }} />
      </Box>
    )}
  </Story>
</Canvas>

### GlobalHeader Accepts an onClick Function

To mock this, a very basic onClick function is provided, which just prints out the event & the item to the console.

<Canvas>
  <Story name="Passing an OnClick to GlobalHeader">
    {(args) => (
      <GlobalHeader
        onClick={(event, item) => {
          // eslint-disable-next-line no-console
          console.log(event);
          // eslint-disable-next-line no-console
          console.log(item);
        }}
        variant={{
          type: 'anon',
        }}
      />
    )}
  </Story>
</Canvas>

## How It's All Connected in Gamut

`GlobalHeader` passes to `AppHeader` the header items, and then `AppHeader` renders the header content in `AppBar` (with a `left` and `right` `AppBarSection`). The `AppHeader` has no knowledge of the user; it just takes as a prop an object that has a left property (an array of `AppHeaderItem`) to render on the left side of the header & a right property (an array of `AppHeaderItem`) to render on the right side of the header. These item objects which are passed in are mapped to `AppHeader` components.

### How to Add a New Item to GlobalHeader

Check the [Navigation How-To Guide](https://docs.google.com/presentation/d/1YHG6IjvSJG0w8N63phbw5aZCknUOR4B-q_SFM3GLIJc/edit#slide=id.g8a8c98c6f1_0_14) for information on what should be included in the global navigation system.

1. Add the appropriate item to the `GlobalHeaderItems.tsx` file, including the necessary properities like `id`, `href`, `text`, `type`, etc.
2. Update `GlobalHeaderVariants.tsx` to include the new item for the user roles that need it.
