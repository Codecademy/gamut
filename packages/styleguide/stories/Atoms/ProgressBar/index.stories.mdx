import {
  Box,
  GridBox,
  Column,
  LayoutGrid,
  ProgressBar,
} from '@codecademy/gamut/src';
import { theme } from '@codecademy/gamut-styles';
import title from '@codecademy/macros/lib/title.macro';
import { Canvas, Meta, Props, Story } from '@storybook/addon-docs/dist/blocks';

import { bars } from './constants';

<Meta
  title={title}
  component={ProgressBar}
  parameters={{
    subtitle: 'A horizontal bar for displaying progress',
    source: 'gamut',
    status: 'volatile',
  }}
  args={{ minimumPercent: 5, percent: 5 }}
/>

ProgressBars are to be used when you would like to indicate a known or
somewhat-known amount of progress along a fixed course. For example, you
might show one on a quiz page indicating how many questions have been
completed.

Bars with `large` specified are thicker, and will display a
percentage label.

<Canvas>
  <Story name="ProgressBar">
    {(args) => (
      <LayoutGrid columnGap="sm" rowGap="sm">
        {[0, 25, 50, 75, 100].map((percent) =>
          bars.map(({ large, variant }) => (
            <Column key={[percent, large, variant].join()} size={6}>
              <ProgressBar large={large} percent={percent} variant={variant} />
            </Column>
          ))
        )}
      </LayoutGrid>
    )}
  </Story>
</Canvas>

<Props story="ProgressBar" />

## Minimum Percent

Some bars (generally small ones) should display at least a little bit of
progress, even if the technical progress number is zero. You can use the
`minimumPercent` prop for a minimum visual width percentage.

<Canvas>
  <Story name="Minimum Percentage">{(args) => <ProgressBar {...args} />}</Story>
</Canvas>

## Style Overrides

For the sake of rapid iteration, you can pass in custom style colors via the
`style` prop.

<Canvas>
  <Story
    name="Style Overrides"
    args={{
      large: true,
      percent: 45,
      style: {
        barColor: theme.colors[`gray-200`],
        fontColor: theme.colors.navy,
      },
    }}
  >
    {(args) => <ProgressBar {...args} />}
  </Story>
</Canvas>

## Pattern background

Using the new SVG Pattern component for the background. Here we are using the DiagonalStripesRegular Pattern in navy in the large ProgressBar and the diagonalStripesDense pattern in the smaller ProgressBar.

### Stripes Regular

<Canvas column={2}>
  <Story
    name="Stripe - Regular"
    args={{
      pattern: 'diagonalStripesRegular',
      large: true,
      percent: 50,
      variant: 'yellow',
    }}
  >
    {(args) => <ProgressBar {...args} />}
  </Story>
</Canvas>

### Stripes Dense

<Canvas>
  <Story
    name="Stripe - Dense"
    args={{
      pattern: 'diagonalStripesDense',
      large: true,
      percent: 50,
      variant: 'blue',
    }}
  >
    {(args) => <ProgressBar {...args} />}
  </Story>
</Canvas>

## Bordered variant

This is a variant of the the small version of the ProgressBar. It has a transparent background and defaults to white, but you can use style overrides to change the color of the bar or border.

### Bordered Regular

<Canvas column={2}>
  <Story
    name="Bordered - Regular"
    args={{
      percent: 50,
      variant: 'bordered',
      width: '150px',
    }}
  >
    {(args) => (
      <GridBox alignContent="center" height="8rem" backgroundColor="navy">
        <Box padding="2rem">
          <ProgressBar {...args} />
        </Box>
      </GridBox>
    )}
  </Story>
</Canvas>

### Bordered Styled

<Canvas column={2}>
  <Story
    name="Bordered - Styled"
    args={{
      percent: 69,
      variant: 'bordered',
      style: {
        barColor: theme.colors.navy,
        fontColor: theme.colors.navy,
      },
    }}
  >
    {(args) => <ProgressBar {...args} />}
  </Story>
</Canvas>
