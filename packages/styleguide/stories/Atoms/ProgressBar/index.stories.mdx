import { Column, LayoutGrid, ProgressBar } from '@codecademy/gamut/src';
import { colors } from '@codecademy/gamut-styles';
import title from '@codecademy/macros/lib/title.macro';
import { Canvas, Meta, Props, Story } from '@storybook/addon-docs/dist/blocks';
import { number } from '@storybook/addon-knobs';

import { bars } from './constants';

<Meta
  title={title}
  component={ProgressBar}
  parameters={{
    subtitle: 'A horizontal bar for displaying progress',
    source: 'gamut',
    status: 'volatile',
  }}
/>

ProgressBars are to be used when you would like to indicate a known or
somewhat-known amount of progress along a fixed course. For example, you
might show one on a quiz page indicating how many questions have been
completed.

Bars with `large` specified are thicker, and will display a
percentage label if a font color is specified.

<Canvas>
  <Story name="ProgressBar">
    {(args) => (
      <LayoutGrid columnGap="sm" rowGap="sm">
        {[0, 25, 50, 75, 100].map((percent) =>
          bars.map(({ large, theme }) => (
            <Column key={[percent, large, theme].join()} size={6}>
              <ProgressBar large={large} percent={percent} theme={theme} />
            </Column>
          ))
        )}
      </LayoutGrid>
    )}
  </Story>
</Canvas>

<Props of={ProgressBar} />

## Minimum Percent

Some bars (generally small ones) should display at least a little bit of
progress, even if the technical progress number is zero. You can use the
`minimumPercent` prop for a minimum visual width percentage.

<Canvas>
  <Story name="Minimum Percentage">
    <ProgressBar
      minimumPercent={number('Minimum Percent', 5)}
      percent={number('Percent', 0)}
      theme="blue"
    />
  </Story>
</Canvas>

## Style Overrides

For the sake of rapid iteration, you can pass in custom style colors via the
`style` prop.

<Canvas>
  <Story name="Style Overrides">
    <ProgressBar
      minimumPercent={number('Minimum Percent', 5)}
      large
      percent={number('Percent', 0)}
      style={{
        backgroundColor: colors.red[900],
        barColor: colors.red[600],
        fontColor: colors.white,
      }}
      theme="blue"
    />
  </Story>
</Canvas>

## Pattern background

Using the new SVG Pattern component for the background. Here we are using the DiagonalStripesRegular Pattern in navy in the large ProgressBar and the diagonalStripesDense pattern in the smaller ProgressBar.

<Canvas>
  <Story name="Stripe">
    <LayoutGrid columnGap="sm" rowGap="sm">
      <Column size={6}>
        <ProgressBar
          percent={50}
          pattern="diagonalStripesRegular"
          large
          theme="yellow"
        />
      </Column>
      <Column size={6}>
        <ProgressBar percent={50} pattern="diagonalStripesDense" theme="blue" />
      </Column>
    </LayoutGrid>
  </Story>
</Canvas>
