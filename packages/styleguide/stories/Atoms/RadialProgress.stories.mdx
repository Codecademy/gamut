import { RadialProgress } from '@codecademy/gamut/src';
import title from '@codecademy/macros/lib/title.macro';
import { Canvas, Meta, Props, Story } from '@storybook/addon-docs/dist/blocks';
import { boolean, number, select, text } from '@storybook/addon-knobs';

import { selectableColors } from '~styleguide/blocks';

<Meta
  title={title}
  component={RadialProgress}
  parameters={{
    subtitle: 'An SVG dial for displaying progress or percentages',
    source: 'gamut',
  }}
/>

A circular display of progress meant to convey a
percentage out of a whole.

<Canvas>
  <Story name="RadialProgress">
    {(args) => (
      <RadialProgress
        style={{ color: select('color', selectableColors, 'black') }}
        size={text('size', '10rem')}
        value={number('value', 30)}
        strokeLinecap={select('strokeLinecap', ['round', 'butt'], 'round')}
        strokeWidth={text('strokeWidth', '10')}
      />
    )}
  </Story>
</Canvas>

<Props of={RadialProgress} />

## Children

Optionally, children may be provided to be displayed in the center of the circle.
This is useful for conveying a textual description of progress, such as a percentage of X/Y ratio.

<Canvas>
  <Story name="Children">
    {(args) => (
      <RadialProgress size="5rem" value={75}>
        {text('children', '75%')}
      </RadialProgress>
    )}
  </Story>
</Canvas>

## Animating

Given an initial value, end value, and duration, these will animate
smoothly upon being rendered.

Click on the `Animating` checkbox below to {action}.

<Canvas>
  <Story name="Animating">
    {(args) => {
      const rendering = boolean('Animating', false);
      return (
        <>
          <RadialProgress size="8rem" value={0} />
          {rendering && (
            <>
              <RadialProgress size="8rem" value={[0, 25]} duration={1000} />
              <RadialProgress size="8rem" value={[25, 66]} duration={1000} />
              <RadialProgress size="8rem" value={[0, 90]} duration={1000} />
              <RadialProgress size="8rem" value={[80, 100]} duration={1000} />
              <RadialProgress size="8rem" value={[0, 100]} duration={3000} />
              <RadialProgress size="8rem" value={[0, 100]} duration={5000} />
            </>
          )}
        </>
      );
    }}
  </Story>
</Canvas>
