import { GridBox, List } from '@codecademy/gamut/src';
import title from '@codecademy/macros/lib/title.macro';
import { PropsTable } from '@codecademy/storybook-addon-variance';
import { Canvas, Meta, Story } from '@storybook/addon-docs/blocks';

import {
  ColumnModifierTemplate,
  ColumnTemplate,
  CondensedTemplate,
  DemoTemplate,
  NormalTemplate,
  ResponsiveAnatomyTemplate,
  ResponsiveTemplate,
} from './examples';

<Meta
  title={title}
  component={List}
  parameters={{
    subtitle: 'Presentational components for creating rows with mixed content',
    source: 'gamut',
    status: 'current',
    design: {
      type: 'figma',
      url:
        'https://www.figma.com/file/QqN956bndK3HZ3AyFjmxNz/Code-Challenges?node-id=77%3A17795',
    },
  }}
  args={{}}
/>

## Usage

```tsx
import { List, ListRow, ListCol } from '@codecademy/gamut';

<List variant="slat" spacing="condensed">
  <ListRow>
    <ListCol size="md">Worf</ListCol>
    <ListCol size="md">Lieutenant Commander</ListCol>
  </ListRow>
  <ListRow>
    <ListCol size="md">Deanna Troi</ListCol>
    <ListCol size="lg">Commander</ListCol>
  </ListRow>
</List>;
```

## Variants

<br />

### Table

For a table like view for content that has more metrics or actionable data use the `table` variant.

<Story name="Table" args={{ variant: 'table', spacing: 'condensed' }}>
  {CondensedTemplate.bind({})}
</Story>

<br />

### Slat

For displaying things with more abstract row contents (like buttons or custom rendered components) use the `slat` variant. This structure denotes borders between rows and separates interactive elements with more clarity than tables.

<Story name="Slat" args={{ variant: 'slat', spacing: 'condensed' }}>
  {CondensedTemplate.bind({})}
</Story>

<br />

### Bar

For content that doesn't need to be compared or visually adjacent to other items in a list (like current curriculum progress) use the `bar` variant.

<Story name="Bar" args={{ variant: 'bar', spacing: 'condensed' }}>
  {CondensedTemplate.bind({})}
</Story>

<br />

## Column Sizing

Column size can either be a fixed value (outline of the prop aliases `xs`, `sm` etc) or by the columns content width.
It is recommended that you use the aliases for any content that may have variable length to ensure that column sizing is consistent between each row. For column children that are static between each row - like buttons or truncated text you can specify `content` to remove white space and still render consistently between rows.

<Story name="Sizes">{ColumnTemplate.bind({})}</Story>

<br />

### Size Modifiers

You can specify a column to expand or collapse beyond its normal flex basis. These modifiers can be used in conjunction with any size specification:

- `fill`: This fills any available space and pushes all other columns to the end of the row when specified.
- `collapse`: Whether or not to shrink the row below its current flex-basis when no other space is available. This is useful in conjunction with low priority columns that may not provide valuable information to the user at a smaller screensize or can be easily truncated.

<Story name="Modifiers">{ColumnModifierTemplate.bind({})}</Story>

### Responsive Layouts

List rows will switch to a mobile layout at screen widths less than smallest breakpoint (480px). This layout is built for smaller screens and is restructured to a card like structure. There is no extra configuration needed for this to take effect pending you've configured a few named column types:

- `header`: The column of the row with any critical indifying information goes at the top of the view.
- `action`: A column for buttons or other interactive elements. Typically these may be icon buttons with expandable menus with more options for controlling anything represented in the row.
- `content`: All other columns in the row are treated as content and will render in order they were specified.

<GridBox gridTemplateColumns="repeat(2, minmax(0, 479px))" gap={64}>

<Canvas>
  <Story
    name="Layouts"
    parameters={{
      docs: { inlineStories: false, iframeHeight: 160 },
    }}
  >
    {ResponsiveAnatomyTemplate.bind({})}
  </Story>
</Canvas>

<Canvas>
  <Story
    name="Layout with Content"
    parameters={{
      docs: { inlineStories: false, iframeHeight: 160 },
    }}
  >
    {ResponsiveTemplate.bind({})}
  </Story>
</Canvas>

</GridBox>

## Spacing

### Normal

For mixed content use the normal size to ensure that there is enough space for components

<Story name="Normal - Light" args={{ variant: 'slat', spacing: 'normal' }}>
  {NormalTemplate.bind({})}
</Story>

### Condensed

For a more compact list use the condensed spacing

<Story
  name="Condensed - Light"
  args={{ variant: 'slat', spacing: 'condensed' }}
>
  {CondensedTemplate.bind({})}
</Story>

<br />

## Code Playground

<Canvas>
  <Story name="List">{DemoTemplate.bind({})}</Story>
</Canvas>

<PropsTable story="List" />
