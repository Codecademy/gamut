import { Column, LayoutGrid } from '@codecademy/gamut';
import title from '@codecademy/macros/lib/title.macro';
import { Canvas, Meta, Story } from '@storybook/addon-docs/blocks';

import { LinkTo, PropsTable } from '~styleguide/blocks';

import { Example } from './Elements';

<Meta
  title={title}
  component={LayoutGrid}
  subcomponents={{ Column }}
  parameters={{
    subtitle: 'A CSS grid based 12 Column grid system using just grid items.',
    status: 'updating',
    source: 'gamut',
  }}
  args={{
    gap: 24,
  }}
/>

A flexible grid that can support arbitrary rows of content, each of
which snaps to assuming 12 "units" of width. Cells in the rows are
stored as a `Column` that have a grid-specified gap
between them.

Row and column gaps can be configured in a responsive way. For example, you might
have a particular set of gaps at small viewports and bigger ones on large viewports.

export const columns = [
  { size: 12 },
  ...new Array(2).fill({ size: 6 }),
  ...new Array(3).fill({ size: 4 }),
  ...new Array(4).fill({ size: 3 }),
  ...new Array(6).fill({ size: 2 }),
  ...new Array(12).fill({ size: 1 }),
];

<Canvas>
  <Story name="LayoutGrid">
    {(args) => {
      const children = columns.map((props) => (
        <Column {...props}>
          <Example>{props.size}</Example>
        </Column>
      ));
      return <LayoutGrid {...args}>{children}</LayoutGrid>;
    }}
  </Story>
</Canvas>

<PropsTable story="LayoutGrid" />

## Grid Gaps

Grid gaps are the space between cells both horizontally and vertically.
If you would like to adjust the space between columns, set the `columnGap`.
If you would like to adjust the space between rows, set the `rowGap`.
Both these properties can take a <LinkTo id="foundations-system-responsive-properties--page">responsive size</LinkTo>,allowing you to define gaps at each breakpoint.

<Canvas>
  <Story name="Grid Gaps">
    {(args) => (
      <LayoutGrid {...args}>
        <Column>
          <Example>12</Example>
        </Column>
        <Column size={6}>
          <Example>6</Example>
        </Column>
        <Column size={6}>
          <Example>6</Example>
        </Column>
        <Column size={3}>
          <Example>3</Example>
        </Column>
        <Column size={3}>
          <Example>3</Example>
        </Column>
        <Column size={3}>
          <Example>3</Example>
        </Column>
        <Column size={3}>
          <Example>3</Example>
        </Column>
      </LayoutGrid>
    )}
  </Story>
</Canvas>

## Row Height

<Canvas>
  <Story name="Row Height" args={{ rowHeight: 75 }}>
    {(args) => (
      <LayoutGrid {...args}>
        {new Array(12).fill({ size: 3 }).map((props) => (
          <Column {...props}>
            <Example />
          </Column>
        ))}
      </LayoutGrid>
    )}
  </Story>
</Canvas>

## Offsets

Columns may be offset from the left by numbers within the [0-12] scale.
As with column and row gaps, those numbers may be static or responsive.

<Canvas>
  <Story name="Column Offsets">
    {(args) => (
      <LayoutGrid {...args}>
        <Column offset={2} size={4}>
          <Example>2 Column offset</Example>
        </Column>
        <Column size={2}>
          <Example />
        </Column>
        <Column size={2}>
          <Example />
        </Column>
        <Column size={4}>
          <Example>No offset</Example>
        </Column>
        <Column size={8}>
          <Example />
        </Column>
        <Column offset={{ base: 6, md: 4, lg: 2 }} size={6}>
          <Example>sm: 6, md: 4, lg: 2</Example>
        </Column>
        <Column offset={{ base: 0, md: 4 }} size={6}>
          <Example>no offset sm, md: 4</Example>
        </Column>
      </LayoutGrid>
    )}
  </Story>
</Canvas>

## Rowspans

Columns may be span multiple rows. Make sure you have a consistent row height when using rowspans.

<Canvas>
  <Story name="Column Rowspans">
    {(args) => {
      const children = new Array(16).fill({ size: 3 }).map((props, i) => (
        <Column {...props} rowspan={(i % 2) + 1}>
          <Example>{props.size}</Example>
        </Column>
      ));
      return <LayoutGrid {...args}>{children}</LayoutGrid>;
    }}
  </Story>
</Canvas>
