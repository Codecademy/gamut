"use strict";(self.webpackChunkgamut_repo=self.webpackChunkgamut_repo||[]).push([[376,4745],{"./node_modules/@vidstack/react/prod/chunks/vidstack-CcKOND9e.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{h:()=>EmbedProvider});var _vidstack_WyKbSRm0_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@vidstack/react/prod/chunks/vidstack-WyKbSRm0.js"),_vidstack_CNjv_Zem_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@vidstack/react/prod/chunks/vidstack-CNjv_Zem.js");class EmbedProvider{#iframe;src=(0,_vidstack_CNjv_Zem_js__WEBPACK_IMPORTED_MODULE_0__.signal)("");referrerPolicy=null;get iframe(){return this.#iframe}constructor(iframe){this.#iframe=iframe,iframe.setAttribute("frameBorder","0"),iframe.setAttribute("aria-hidden","true"),iframe.setAttribute("allow","autoplay; fullscreen; encrypted-media; picture-in-picture; accelerometer; gyroscope"),null!==this.referrerPolicy&&iframe.setAttribute("referrerpolicy",this.referrerPolicy)}setup(){(0,_vidstack_CNjv_Zem_js__WEBPACK_IMPORTED_MODULE_0__.listenEvent)(window,"message",this.#onWindowMessage.bind(this)),(0,_vidstack_CNjv_Zem_js__WEBPACK_IMPORTED_MODULE_0__.listenEvent)(this.#iframe,"load",this.onLoad.bind(this)),(0,_vidstack_CNjv_Zem_js__WEBPACK_IMPORTED_MODULE_0__.effect)(this.#watchSrc.bind(this))}#watchSrc(){const src=this.src();if(!src.length)return void this.#iframe.setAttribute("src","");const params=(0,_vidstack_CNjv_Zem_js__WEBPACK_IMPORTED_MODULE_0__.peek)((()=>this.buildParams()));this.#iframe.setAttribute("src",(0,_vidstack_WyKbSRm0_js__WEBPACK_IMPORTED_MODULE_1__.xF)(src,params))}postMessage(message,target){_vidstack_WyKbSRm0_js__WEBPACK_IMPORTED_MODULE_1__.X3||this.#iframe.contentWindow?.postMessage(JSON.stringify(message),target??"*")}#onWindowMessage(event){const origin=this.getOrigin();if(!(null!==event.source&&event.source!==this.#iframe?.contentWindow||(0,_vidstack_CNjv_Zem_js__WEBPACK_IMPORTED_MODULE_0__.isString)(origin)&&origin!==event.origin)){try{const message=JSON.parse(event.data);return void(message&&this.onMessage(message,event))}catch(e){}event.data&&this.onMessage(event.data,event)}}}},"./node_modules/@vidstack/react/prod/chunks/vidstack-krOAtKMi.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{getVimeoVideoInfo:()=>getVimeoVideoInfo,resolveVimeoVideoId:()=>resolveVimeoVideoId});const videoIdRE=/(?:https:\/\/)?(?:player\.)?vimeo(?:\.com)?\/(?:video\/)?(\d+)(?:(?:\?hash=|\?h=|\/)(.*))?/,infoCache=new Map,pendingFetch=new Map;function resolveVimeoVideoId(src){const matches=src.match(videoIdRE);return{videoId:matches?.[1],hash:matches?.[2]}}async function getVimeoVideoInfo(videoId,abort,videoHash){if(infoCache.has(videoId))return infoCache.get(videoId);if(pendingFetch.has(videoId))return pendingFetch.get(videoId);let oembedSrc=`https://vimeo.com/api/oembed.json?url=https://player.vimeo.com/video/${videoId}`;videoHash&&(oembedSrc=oembedSrc.concat(`?h=${videoHash}`));const promise=window.fetch(oembedSrc,{mode:"cors",signal:abort.signal}).then((response=>response.json())).then((data=>{const thumbnailId=data?.thumbnail_url?.match(/vimeocdn.com\/video\/(.*)?_/)?.[1],poster=thumbnailId?`https://i.vimeocdn.com/video/${thumbnailId}_1920x1080.webp`:"",info={title:data?.title??"",duration:data?.duration??0,poster,pro:"basic"!==data.account_type};return infoCache.set(videoId,info),info})).finally((()=>pendingFetch.delete(videoId)));return pendingFetch.set(videoId,promise),promise}},"./node_modules/@vidstack/react/prod/chunks/vidstack-nI3MtI8G.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{VimeoProvider:()=>VimeoProvider});var _vidstack_CNjv_Zem_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@vidstack/react/prod/chunks/vidstack-CNjv_Zem.js"),_vidstack_WyKbSRm0_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@vidstack/react/prod/chunks/vidstack-WyKbSRm0.js"),_vidstack_CcKOND9e_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@vidstack/react/prod/chunks/vidstack-CcKOND9e.js"),_vidstack_krOAtKMi_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@vidstack/react/prod/chunks/vidstack-krOAtKMi.js");__webpack_require__("./node_modules/react/index.js");const trackedVimeoEvents=["bufferend","bufferstart","durationchange","ended","enterpictureinpicture","error","fullscreenchange","leavepictureinpicture","loaded","playProgress","loadProgress","pause","play","playbackratechange","qualitychange","seeked","seeking","timeupdate","volumechange","waiting"];class VimeoProvider extends _vidstack_CcKOND9e_js__WEBPACK_IMPORTED_MODULE_1__.h{$$PROVIDER_TYPE="VIMEO";scope=(0,_vidstack_CNjv_Zem_js__WEBPACK_IMPORTED_MODULE_2__.createScope)();fullscreen;#ctx;#videoId=(0,_vidstack_CNjv_Zem_js__WEBPACK_IMPORTED_MODULE_2__.signal)("");#pro=(0,_vidstack_CNjv_Zem_js__WEBPACK_IMPORTED_MODULE_2__.signal)(!1);#hash=null;#currentSrc=null;#fullscreenActive=!1;#seekableRange=new _vidstack_WyKbSRm0_js__WEBPACK_IMPORTED_MODULE_3__.zJ(0,0);#timeRAF=new _vidstack_WyKbSRm0_js__WEBPACK_IMPORTED_MODULE_3__.e8(this.#onAnimationFrame.bind(this));#currentCue=null;#chaptersTrack=null;#promises=new Map;#videoInfoPromise=null;constructor(iframe,ctx){super(iframe),this.#ctx=ctx;const self=this;this.fullscreen={get active(){return self.#fullscreenActive},supported:!0,enter:()=>this.#remote("requestFullscreen"),exit:()=>this.#remote("exitFullscreen")}}cookies=!1;title=!0;byline=!0;portrait=!0;color="00ADEF";get type(){return"vimeo"}get currentSrc(){return this.#currentSrc}get videoId(){return this.#videoId()}get hash(){return this.#hash}get isPro(){return this.#pro()}preconnect(){(0,_vidstack_WyKbSRm0_js__WEBPACK_IMPORTED_MODULE_3__.TB)(this.getOrigin())}setup(){super.setup(),(0,_vidstack_CNjv_Zem_js__WEBPACK_IMPORTED_MODULE_2__.effect)(this.#watchVideoId.bind(this)),(0,_vidstack_CNjv_Zem_js__WEBPACK_IMPORTED_MODULE_2__.effect)(this.#watchVideoInfo.bind(this)),(0,_vidstack_CNjv_Zem_js__WEBPACK_IMPORTED_MODULE_2__.effect)(this.#watchPro.bind(this)),this.#ctx.notify("provider-setup",this)}destroy(){this.#reset(),this.fullscreen=void 0;for(const promises of this.#promises.values())for(const{reject}of promises)reject("provider destroyed");this.#promises.clear(),this.#remote("destroy")}async play(){return this.#remote("play")}async pause(){return this.#remote("pause")}setMuted(muted){this.#remote("setMuted",muted)}setCurrentTime(time){this.#remote("seekTo",time),this.#ctx.notify("seeking",time)}setVolume(volume){this.#remote("setVolume",volume),this.#remote("setMuted",(0,_vidstack_CNjv_Zem_js__WEBPACK_IMPORTED_MODULE_2__.peek)(this.#ctx.$state.muted))}setPlaybackRate(rate){this.#remote("setPlaybackRate",rate)}async loadSource(src){if(!(0,_vidstack_CNjv_Zem_js__WEBPACK_IMPORTED_MODULE_2__.isString)(src.src))return this.#currentSrc=null,this.#hash=null,void this.#videoId.set("");const{videoId,hash}=(0,_vidstack_krOAtKMi_js__WEBPACK_IMPORTED_MODULE_4__.resolveVimeoVideoId)(src.src);this.#videoId.set(videoId??""),this.#hash=hash??null,this.#currentSrc=src}#watchVideoId(){this.#reset();const videoId=this.#videoId();videoId?(this.src.set(`${this.getOrigin()}/video/${videoId}`),this.#ctx.notify("load-start")):this.src.set("")}#watchVideoInfo(){const videoId=this.#videoId();if(!videoId)return;const promise=(0,_vidstack_CNjv_Zem_js__WEBPACK_IMPORTED_MODULE_2__.deferredPromise)(),abort=new AbortController;return this.#videoInfoPromise=promise,(0,_vidstack_krOAtKMi_js__WEBPACK_IMPORTED_MODULE_4__.getVimeoVideoInfo)(videoId,abort,this.#hash).then((info=>{promise.resolve(info)})).catch((e=>{promise.reject()})),()=>{promise.reject(),abort.abort()}}#watchPro(){const isPro=this.#pro(),{$state,qualities}=this.#ctx;if($state.canSetPlaybackRate.set(isPro),qualities[_vidstack_WyKbSRm0_js__WEBPACK_IMPORTED_MODULE_3__.jH.setReadonly](!isPro),isPro)return(0,_vidstack_CNjv_Zem_js__WEBPACK_IMPORTED_MODULE_2__.listenEvent)(qualities,"change",(()=>{if(qualities.auto)return;const id=qualities.selected?.id;id&&this.#remote("setQuality",id)}))}getOrigin(){return"https://player.vimeo.com"}buildParams(){const{keyDisabled}=this.#ctx.$props,{playsInline,nativeControls}=this.#ctx.$state,showControls=nativeControls();return{title:this.title,byline:this.byline,color:this.color,portrait:this.portrait,controls:showControls,h:this.hash,keyboard:showControls&&!keyDisabled(),transparent:!0,playsinline:playsInline(),dnt:!this.cookies}}#onAnimationFrame(){this.#remote("getCurrentTime")}#preventTimeUpdates=!1;#onTimeUpdate(time,trigger){if(this.#preventTimeUpdates&&0===time)return;const{realCurrentTime,paused,bufferedEnd,seekableEnd,live}=this.#ctx.$state;if(realCurrentTime()===time)return;const prevTime=realCurrentTime();this.#ctx.notify("time-change",time,trigger),Math.abs(prevTime-time)>1.5&&(this.#ctx.notify("seeking",time,trigger),!paused()&&bufferedEnd()<time&&this.#ctx.notify("waiting",void 0,trigger)),!live()&&seekableEnd()-time<.01&&(this.#ctx.notify("end",void 0,trigger),this.#preventTimeUpdates=!0,setTimeout((()=>{this.#preventTimeUpdates=!1}),500))}#onSeeked(time,trigger){this.#ctx.notify("seeked",time,trigger)}#onLoaded(trigger){const videoId=this.#videoId();this.#videoInfoPromise?.promise.then((info=>{if(!info)return;const{title,poster,duration,pro}=info;this.#pro.set(pro),this.#ctx.notify("title-change",title,trigger),this.#ctx.notify("poster-change",poster,trigger),this.#ctx.notify("duration-change",duration,trigger),this.#onReady(duration,trigger)})).catch((()=>{videoId===this.#videoId()&&(this.#remote("getVideoTitle"),this.#remote("getDuration"))}))}#onReady(duration,trigger){const{nativeControls}=this.#ctx.$state,showEmbedControls=nativeControls();this.#seekableRange=new _vidstack_WyKbSRm0_js__WEBPACK_IMPORTED_MODULE_3__.zJ(0,duration);const detail={buffered:new _vidstack_WyKbSRm0_js__WEBPACK_IMPORTED_MODULE_3__.zJ(0,0),seekable:this.#seekableRange,duration};this.#ctx.delegate.ready(detail,trigger),showEmbedControls||this.#remote("_hideOverlay"),this.#remote("getQualities"),this.#remote("getChapters")}#onMethod(method,data,trigger){switch(method){case"getVideoTitle":const videoTitle=data;this.#ctx.notify("title-change",videoTitle,trigger);break;case"getDuration":const duration=data;this.#ctx.$state.canPlay()?this.#ctx.notify("duration-change",duration,trigger):this.#onReady(duration,trigger);break;case"getCurrentTime":this.#onTimeUpdate(data,trigger);break;case"getBuffered":(0,_vidstack_CNjv_Zem_js__WEBPACK_IMPORTED_MODULE_2__.isArray)(data)&&data.length&&this.#onLoadProgress(data[data.length-1][1],trigger);break;case"setMuted":this.#onVolumeChange((0,_vidstack_CNjv_Zem_js__WEBPACK_IMPORTED_MODULE_2__.peek)(this.#ctx.$state.volume),data,trigger);break;case"getChapters":this.#onChaptersChange(data);break;case"getQualities":this.#onQualitiesChange(data,trigger)}this.#getPromise(method)?.resolve()}#attachListeners(){for(const type of trackedVimeoEvents)this.#remote("addEventListener",type)}#onPause(trigger){this.#timeRAF.stop(),this.#ctx.notify("pause",void 0,trigger)}#onPlay(trigger){this.#timeRAF.start(),this.#ctx.notify("play",void 0,trigger)}#onPlayProgress(trigger){const{paused}=this.#ctx.$state;paused()||this.#preventTimeUpdates||this.#ctx.notify("playing",void 0,trigger)}#onLoadProgress(buffered,trigger){const detail={buffered:new _vidstack_WyKbSRm0_js__WEBPACK_IMPORTED_MODULE_3__.zJ(0,buffered),seekable:this.#seekableRange};this.#ctx.notify("progress",detail,trigger)}#onBufferStart(trigger){this.#ctx.notify("waiting",void 0,trigger)}#onBufferEnd(trigger){const{paused}=this.#ctx.$state;paused()||this.#ctx.notify("playing",void 0,trigger)}#onWaiting(trigger){const{paused}=this.#ctx.$state;paused()&&this.#ctx.notify("play",void 0,trigger),this.#ctx.notify("waiting",void 0,trigger)}#onVolumeChange(volume,muted,trigger){const detail={volume,muted};this.#ctx.notify("volume-change",detail,trigger)}#onChaptersChange(chapters){if(this.#removeChapters(),!chapters.length)return;const track=new _vidstack_WyKbSRm0_js__WEBPACK_IMPORTED_MODULE_3__.to({kind:"chapters",default:!0}),{seekableEnd}=this.#ctx.$state;for(let i=0;i<chapters.length;i++){const chapter=chapters[i],nextChapter=chapters[i+1];track.addCue(new window.VTTCue(chapter.startTime,nextChapter?.startTime??seekableEnd(),chapter.title))}this.#chaptersTrack=track,this.#ctx.textTracks.add(track)}#removeChapters(){this.#chaptersTrack&&(this.#ctx.textTracks.remove(this.#chaptersTrack),this.#chaptersTrack=null)}#onQualitiesChange(qualities,trigger){this.#ctx.qualities[_vidstack_WyKbSRm0_js__WEBPACK_IMPORTED_MODULE_3__.kW.enableAuto]=qualities.some((q=>"auto"===q.id))?()=>this.#remote("setQuality","auto"):void 0;for(const quality of qualities){if("auto"===quality.id)continue;const height=+quality.id.slice(0,-1);isNaN(height)||this.#ctx.qualities[_vidstack_WyKbSRm0_js__WEBPACK_IMPORTED_MODULE_3__.jH.add]({id:quality.id,width:height*(16/9),height,codec:"avc1,h.264",bitrate:-1},trigger)}this.#onQualityChange(qualities.find((q=>q.active)),trigger)}#onQualityChange({id}={},trigger){if(!id)return;const isAuto="auto"===id,newQuality=this.#ctx.qualities.getById(id);isAuto?(this.#ctx.qualities[_vidstack_WyKbSRm0_js__WEBPACK_IMPORTED_MODULE_3__.kW.setAuto](isAuto,trigger),this.#ctx.qualities[_vidstack_WyKbSRm0_js__WEBPACK_IMPORTED_MODULE_3__.jH.select](void 0,!0,trigger)):this.#ctx.qualities[_vidstack_WyKbSRm0_js__WEBPACK_IMPORTED_MODULE_3__.jH.select](newQuality??void 0,!0,trigger)}#onEvent(event,payload,trigger){switch(event){case"ready":this.#attachListeners();break;case"loaded":this.#onLoaded(trigger);break;case"play":this.#onPlay(trigger);break;case"playProgress":this.#onPlayProgress(trigger);break;case"pause":this.#onPause(trigger);break;case"loadProgress":this.#onLoadProgress(payload.seconds,trigger);break;case"waiting":this.#onWaiting(trigger);break;case"bufferstart":this.#onBufferStart(trigger);break;case"bufferend":this.#onBufferEnd(trigger);break;case"volumechange":this.#onVolumeChange(payload.volume,(0,_vidstack_CNjv_Zem_js__WEBPACK_IMPORTED_MODULE_2__.peek)(this.#ctx.$state.muted),trigger);break;case"durationchange":this.#seekableRange=new _vidstack_WyKbSRm0_js__WEBPACK_IMPORTED_MODULE_3__.zJ(0,payload.duration),this.#ctx.notify("duration-change",payload.duration,trigger);break;case"playbackratechange":this.#ctx.notify("rate-change",payload.playbackRate,trigger);break;case"qualitychange":this.#onQualityChange(payload,trigger);break;case"fullscreenchange":this.#fullscreenActive=payload.fullscreen,this.#ctx.notify("fullscreen-change",payload.fullscreen,trigger);break;case"enterpictureinpicture":this.#ctx.notify("picture-in-picture-change",!0,trigger);break;case"leavepictureinpicture":this.#ctx.notify("picture-in-picture-change",!1,trigger);break;case"ended":this.#ctx.notify("end",void 0,trigger);break;case"error":this.#onError(payload,trigger);break;case"seek":case"seeked":this.#onSeeked(payload.seconds,trigger)}}#onError(error,trigger){const{message,method}=error;"setPlaybackRate"===method&&this.#pro.set(!1),method&&this.#getPromise(method)?.reject(message)}onMessage(message,event){message.event?this.#onEvent(message.event,message.data,event):message.method&&this.#onMethod(message.method,message.value,event)}onLoad(){}async#remote(command,arg){let promise=(0,_vidstack_CNjv_Zem_js__WEBPACK_IMPORTED_MODULE_2__.deferredPromise)(),promises=this.#promises.get(command);return promises||this.#promises.set(command,promises=[]),promises.push(promise),this.postMessage({method:command,value:arg}),promise.promise}#reset(){this.#timeRAF.stop(),this.#seekableRange=new _vidstack_WyKbSRm0_js__WEBPACK_IMPORTED_MODULE_3__.zJ(0,0),this.#videoInfoPromise=null,this.#currentCue=null,this.#pro.set(!1),this.#removeChapters()}#getPromise(command){return this.#promises.get(command)?.shift()}}}}]);